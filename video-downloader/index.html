<!doctype html>
<html lang="en">
<head>
  <!-- Google AdSense (kept at top; fixed-height slot used below to avoid CLS) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6216304334889617" crossorigin="anonymous"></script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Instagram Video Downloader – Reels, Photos, Stories & Audio (MP3) | UpTools</title>
  <meta name="description" content="Free Instagram downloader by UpTools. Paste any public Instagram link and download the reel, video, photo, carousel or story in all available qualities. Extract audio (MP3), copy captions, and save thumbnails. Fast, responsive, and privacy-first.">
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1">
  <meta name="theme-color" content="#0f1419">
  <link rel="canonical" href="https://www.uptools.in/video-downloader/">

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="Instagram Video Downloader – Reels, Photos, Stories & Audio">
  <meta property="og:description" content="Paste an Instagram link → get instant download options for video, photo, reel, carousel, story, and audio (MP3).">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.uptools.in/video-downloader/">
  <meta property="og:site_name" content="UpTools">
  <meta property="og:image" content="https://www.uptools.in/assets/og/instagram-video-downloader.png">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="/assets/logo/uptools-logo.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/logo/uptools-logo.svg">

  <!-- Critical tiny inline (kept minimal) -->
  <style>
    :root{--vh:100dvh}
    .compact-grid{display:grid;grid-template-columns:1.1fr .9fr;gap:12px}
    @media (max-width:900px){.compact-grid{grid-template-columns:1fr}}
    .media-preview{width:100%;max-width:640px;border-radius:12px;overflow:hidden;border:1px solid var(--border);background:#0a1224;box-shadow:var(--glow-soft)}
    .media-preview img,.media-preview video{display:block;width:100%;height:auto;aspect-ratio:16/9;object-fit:cover}
    .qualities{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;margin-top:10px}
    .qual{display:flex;flex-direction:column;gap:8px;padding:12px;border:1px solid var(--border);border-radius:10px;background:#0b1326;box-shadow:var(--glow-soft)}
    .kvi{margin:2px 0}
    .capsule{display:inline-flex;gap:6px;align-items:center;padding:4px 8px;border-radius:999px;border:1px solid var(--border);font-size:12px;background:#0b1326}
    .help{display:grid;gap:12px}
    .ad-wrap{width:100%;min-height:250px;display:block;border:1px dashed color-mix(in oklab, var(--accent) 35%, #243);border-radius:12px;box-shadow:var(--glow-soft);padding:6px}
    .ad-note{font-size:12px;color:var(--muted);text-align:center;margin-bottom:6px}
    .howto li{margin:.25rem 0}
    /* Try to keep above-the-fold height tight */
    .wrap{padding:14px;margin:18px auto}
    .hero h1{font-size:20px}
    .tool-header{margin-bottom:12px}
  </style>

  <!-- Common CSS (non-blocking) -->
  <link rel="preload" href="/style.css?v=1.1.0" as="style">
  <link rel="stylesheet" href="/style.css?v=1.1.0" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/style.css?v=1.1.0"></noscript>

  <!-- JSON-LD: SoftwareApplication -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"Instagram Video Downloader",
    "applicationCategory":"MultimediaApplication",
    "operatingSystem":"Any",
    "image":"https://www.uptools.in/assets/og/instagram-video-downloader.png",
    "url":"https://www.uptools.in/video-downloader/",
    "description":"Paste any Instagram link and download reels, videos, stories, carousels, photos and audio (MP3) in available qualities.",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"INR"},
    "publisher":{"@type":"Organization","name":"UpTools","logo":{"@type":"ImageObject","url":"https://www.uptools.in/assets/logo/uptools-logo.svg"}}
  }
  </script>

  <!-- JSON-LD: Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Tools","item":"https://www.uptools.in/#tools"},
      {"@type":"ListItem","position":2,"name":"Instagram Tools","item":"https://www.uptools.in/instagram-tools/"},
      {"@type":"ListItem","position":3,"name":"Instagram Video Downloader","item":"https://www.uptools.in/video-downloader/"}
    ]
  }
  </script>

  <!-- JSON-LD: FAQ -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org","@type":"FAQPage","mainEntity":[
      {"@type":"Question","name":"Can I download private Instagram content?","acceptedAnswer":{"@type":"Answer","text":"No. Only publicly accessible content that you have permission to download is supported."}},
      {"@type":"Question","name":"Does this work for reels, stories, and carousels?","acceptedAnswer":{"@type":"Answer","text":"Yes. Paste the public link and the tool lists all available media: reels, standard videos, story items, carousel photos, and their qualities."}},
      {"@type":"Question","name":"Can I extract audio (MP3) from a reel or video?","acceptedAnswer":{"@type":"Answer","text":"Yes. Choose the MP3 option if available for that link. For some posts, audio may be unavailable due to publisher settings."}},
      {"@type":"Question","name":"Is my link stored?","acceptedAnswer":{"@type":"Answer","text":"No. We do not store your links or downloads. See our privacy note on the page."}}
    ]
  }
  </script>
</head>

<body>
  <!-- Header (exact pattern you requested) -->
  <header class="site" role="banner">
    <div class="header-inner">
      <a class="brand" href="/" aria-label="UpTools Home">
        <img src="/assets/logo/uptools-logo.svg" alt="UpTools logo" width="28" height="28" loading="eager">
        <b>UpTools</b>
      </a>
      <nav class="nav-links" aria-label="Primary">
        <a href="/#tools">Tools</a>
        <a href="/income-tax-tool/">Income Tax</a>
        <a href="/emi-calculator/">EMI</a>
        <a href="/gst-calculator/">GST</a>
      </nav>
    </div>
  </header>

  <main class="wrap" id="main">
    <!-- Compact hero -->
    <section class="hero neon" aria-label="Instagram video downloader">
      <img class="hero-logo" src="/assets/logo/uptools-logo.svg" alt="UpTools" width="28" height="28" loading="eager">
      <div>
        <h1>Instagram Video Downloader (All Qualities + MP3)</h1>
        <p class="note">Paste any public Instagram link (reel, video, photo, carousel, or story) → download in available resolutions or extract audio.</p>
      </div>
    </section>

    <div class="tool-header">
      <div class="tool-icon">IG</div>
      <h2 style="margin:0">Fast, ad-light, privacy-first</h2>
    </div>

    <section class="compact-grid" aria-label="Downloader area">
      <!-- Left: Form + Results -->
      <div class="card neon" id="left">
        <form id="dl-form" class="form" onsubmit="return false" novalidate>
          <label class="label" for="url">Instagram Link</label>
          <div class="grid" style="grid-template-columns:1fr auto auto auto;">
            <input id="url" name="url" class="input" placeholder="https://www.instagram.com/reel/..." autocomplete="off" spellcheck="false" aria-describedby="urlHelp">
            <button id="pasteBtn" class="btn secondary" type="button" title="Paste from clipboard">Paste</button>
            <button id="clearBtn" class="btn ghost" type="button" title="Clear">Clear</button>
            <button id="fetchBtn" class="btn" type="button" title="Fetch media">Fetch</button>
          </div>
          <div id="urlHelp" class="note" style="margin-top:6px">
            Tip: Works for reels, videos, stories, carousels, and photos. Only public content is supported.
          </div>

          <!-- Quick options -->
          <div class="chips" style="margin-top:10px">
            <span class="pill">Text logo: <b>IG</b></span>
            <span class="pill">All qualities</span>
            <span class="pill">MP3 (if available)</span>
            <a class="pill" href="/instagram-hashtag-generator/" aria-label="Open Hashtag Generator"># Hashtag Generator</a>
          </div>
        </form>

        <!-- Results -->
        <div id="resultBox" class="result hidden" aria-live="polite">
          <div class="media-preview" id="mediaPreview" aria-label="Media preview">
            <!-- Filled dynamically with <img> or <video> -->
          </div>

          <div class="row" style="margin-top:8px">
            <div class="capsule" id="authorCapsule" title="Author">@author</div>
            <div class="capsule" id="typeCapsule" title="Post type">reel</div>
            <div class="capsule" id="dateCapsule" title="Published date">—</div>
          </div>

          <div class="qualities" id="qualities"></div>

          <div class="divider"></div>
          <div class="grid help">
            <div class="small note">
              <b>Privacy:</b> We don’t store links or files. Downloads are fetched on demand from the original source or via our resolver if needed.
            </div>
            <div class="small note">
              <b>Copyright:</b> Only download media you own or are licensed to use. Respect Instagram’s Terms and creators’ rights.
            </div>
          </div>
        </div>

        <!-- Empty state -->
        <div id="emptyState" class="note" style="margin-top:6px">
          Paste a public Instagram link and press <b>Fetch</b> to see all available quality options.
        </div>
      </div>

      <!-- Right: Ad + How-to + Internal links -->
      <aside class="card neon" id="right" aria-label="Info">
        <!-- Ad (only if inventory available; fixed min-height so no layout shift) -->
        <div class="ad-wrap" id="adSlot">
          <div class="ad-note">Sponsored</div>
          <ins class="adsbygoogle"
               style="display:block;width:100%;min-height:250px"
               data-ad-client="ca-pub-6216304334889617"
               data-ad-slot="1010101010"
               data-full-width-responsive="true"></ins>
          <script>try{(adsbygoogle=window.adsbygoogle||[]).push({});}catch(e){/* no-op if blocked */}</script>
        </div>

        <div class="divider"></div>

        <h3 style="margin-top:0">How to use</h3>
        <ol class="howto small">
          <li>Open Instagram, copy the link of a public reel/video/photo/story.</li>
          <li>Paste it here and click <b>Fetch</b>.</li>
          <li>Select any available quality (e.g., 1080p, 720p) or choose <b>MP3</b> for audio-only (if offered).</li>
        </ol>

        <div class="divider"></div>

        <h3>Watch quick demo</h3>
        <div class="media-preview" style="aspect-ratio:auto">
          <!-- Fixed size wrapper to stabilize layout -->
          <div style="position:relative;width:100%;height:0;padding-bottom:56.25%;overflow:hidden;border-radius:12px">
            <iframe
              title="How to download Instagram reels & videos on UpTools"
              width="560" height="315"
              src="https://www.youtube.com/embed/4D9Yd2r0eZ8?rel=0"
              loading="lazy" referrerpolicy="strict-origin-when-cross-origin"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              style="position:absolute;inset:0;border:0;border-radius:12px"></iframe>
          </div>
        </div>

        <div class="divider"></div>

        <h3>More Instagram tools</h3>
        <ul class="tool-list" style="--ico:16px">
          <li><a class="tool-link accent-pink" href="/instagram-reel-downloader/"><span class="ico">🎬</span><b>Reel Downloader</b></a></li>
          <li><a class="tool-link accent-violet" href="/instagram-story-viewer/"><span class="ico">👁️</span><b>Story Viewer/Downloader</b></a></li>
          <li><a class="tool-link accent-green" href="/instagram-dp-viewer/"><span class="ico">🧑‍🦱</span><b>DP Viewer (HD)</b></a></li>
          <li><a class="tool-link accent-amber" href="/instagram-hashtag-generator/"><span class="ico">#️⃣</span><b>Hashtag Generator</b></a></li>
          <li><a class="tool-link accent-cyan" href="/instagram-caption-generator/"><span class="ico">💬</span><b>Caption Generator</b></a></li>
        </ul>
      </aside>
    </section>

    <footer class="note small site-footer" role="contentinfo">
      © <span id="y"></span> UpTools · <a href="/sitemap.xml">Sitemap</a> · <a href="/about/" title="About UpTools">About</a>
    </footer>
  </main>

  <script>document.getElementById('y').textContent = new Date().getFullYear();</script>

  <!-- Common utilities -->
  <script type="module">
    import { $, debounce } from "/scripts/utils.js";

    // ===== Config =====
    const RESOLVER_ROUTES = [
      { test: /(?:^|\.)instagram\.com$/i, endpoint: "/api/ig/resolve?url=" },
      { test: /(?:^|\.)instagr\.am$/i, endpoint: "/api/ig/resolve?url=" },
      { test: /(?:^|\.)threads\.net$/i, endpoint: "/api/ig/resolve?url=" },
      { test: /(?:^|\.)youtube\.com$/i, endpoint: "/api/yt/resolve?url=" },
      { test: /(?:^|\.)youtu\.be$/i, endpoint: "/api/yt/resolve?url=" },
      { test: /(?:^|\.)facebook\.com$/i, endpoint: "/api/fb/resolve?url=" },
      { test: /(?:^|\.)fb\.watch$/i, endpoint: "/api/fb/resolve?url=" },
      { test: /(?:^|\.)tiktok\.com$/i, endpoint: "/api/tiktok/resolve?url=" },
      { test: /(?:^|\.)twitter\.com$/i, endpoint: "/api/tw/resolve?url=" },
      { test: /(?:^|\.)x\.com$/i, endpoint: "/api/tw/resolve?url=" },
    ];

    const DEFAULT_RESOLVER = "/api/resolve?url=";

    const pickResolver = (link) => {
      try {
        const host = new URL(link).hostname.toLowerCase();
        const matched = RESOLVER_ROUTES.find(({ test }) => test.test(host));
        return matched ? matched.endpoint : DEFAULT_RESOLVER;
      } catch {
        return DEFAULT_RESOLVER;
      }
    };

    // ===== Elements =====
    const urlEl = $("#url");
    const resultBox = $("#resultBox");
    const emptyState = $("#emptyState");
    const preview = $("#mediaPreview");
    const qualitiesEl = $("#qualities");
    const authorCapsule = $("#authorCapsule");
    const typeCapsule = $("#typeCapsule");
    const dateCapsule = $("#dateCapsule");

    const directExtRe = /\.(mp4|mov|m4v|webm|jpg|jpeg|png|gif|webp|mp3|m4a|aac|wav|m3u8)(\?.*)?$/i;

    // ===== Helpers =====
    const bytes = n => {
      if (!n && n !== 0) return "";
      const u = ["B","KB","MB","GB","TB"]; let i = 0; let v = n;
      while (v >= 1024 && i < u.length - 1){ v/=1024; i++; }
      return `${v.toFixed(v<10 && i>0 ? 1 : 0)} ${u[i]}`;
    };

    function clearResults(){
      preview.innerHTML = "";
      qualitiesEl.innerHTML = "";
      resultBox.classList.add("hidden");
      emptyState.classList.remove("hidden");
      authorCapsule.textContent = "@author";
      typeCapsule.textContent = "—";
      dateCapsule.textContent = "—";
    }

    function showPreview(data){
      // Choose a representative media to preview (prefer video thumb or first image)
      preview.innerHTML = "";
      const poster = data.thumb || "";
      const first = (data.items && data.items[0]) || null;

      if (first?.type === "video") {
        const v = document.createElement("video");
        v.controls = true;
        v.playsInline = true;
        v.preload = "metadata";
        v.poster = poster || "";
        v.style.aspectRatio = "16/9";
        v.src = first.url; // will work only if CORS allows; still good UX when it does
        preview.appendChild(v);
      } else {
        const img = document.createElement("img");
        img.alt = data.title || "Instagram preview";
        img.width = 640; img.height = 360;
        img.loading = "lazy";
        img.src = poster || first?.url || "";
        preview.appendChild(img);
      }

      authorCapsule.textContent = data.author ? "@" + data.author : "@author";
      const platformLabel = data.platform ? data.platform.charAt(0).toUpperCase() + data.platform.slice(1) : "";
      const typeLabel = data.type || "post";
      typeCapsule.textContent = platformLabel ? typeLabel + " - " + platformLabel : typeLabel;
      dateCapsule.textContent = data.publishedAt || "\u2014";
    }

    function renderQualities(items=[]){
      qualitiesEl.innerHTML = "";
      items.forEach(m => {
        const card = document.createElement("div");
        card.className = "qual";

        const head = document.createElement("div");
        head.innerHTML = `<div class="kvi"><b>${m.type?.toUpperCase() || "MEDIA"}</b> <span class="amount">${m.quality || ""}</span></div>`;
        card.appendChild(head);

        const meta = document.createElement("div");
        meta.className = "small note";
        meta.textContent = [m.mime || "", bytes(m.size)].filter(Boolean).join(" · ");
        card.appendChild(meta);

        const btns = document.createElement("div");
        btns.style.display = "flex";
        btns.style.gap = "8px";

        const a = document.createElement("a");
        a.className = "btn";
        a.rel = "noopener";
        a.href = m.url;
        a.download = ""; // suggest download
        a.textContent = "Download";
        btns.appendChild(a);

        const copy = document.createElement("button");
        copy.type = "button";
        copy.className = "btn secondary";
        copy.textContent = "Copy URL";
        copy.addEventListener("click", async () => {
          try { await navigator.clipboard.writeText(m.url); copy.textContent = "Copied!"; setTimeout(()=>copy.textContent="Copy URL", 1200); }
          catch { alert("Copy failed. Long-press to copy."); }
        });
        btns.appendChild(copy);

        card.appendChild(btns);
        qualitiesEl.appendChild(card);
      });
    }

    async function resolveViaAPI(link){
      const endpoint = pickResolver(link);
      const res = await fetch(endpoint + encodeURIComponent(link), { method: "GET" });
      let data = null;
      try {
        data = await res.json();
      } catch {
        // ignore parse errors and fall back to generic messaging
      }
      if (!res.ok || !(data && data.ok)) {
        const message = (data && data.error) ? data.error : `Resolver failed (${res.status})`;
        const error = new Error(message);
        error.details = data;
        throw error;
      }
      return data;
    }


    function renderAll(payload){
      showPreview(payload);
      renderQualities(payload.items || []);
      emptyState.classList.add("hidden");
      resultBox.classList.remove("hidden");
    }

    async function onFetch(){
      const link = (urlEl.value || "").trim();
      if (!link){ urlEl.focus(); return; }

      // Direct file? (mp4/jpg/png/webm)
      if (directExtRe.test(link)){
        const ext = link.match(directExtRe)?.[1]?.toLowerCase() || "";
        const groups = {
          video: ["mp4","m4v","mov","webm"],
          image: ["jpg","jpeg","png","gif","webp"],
          audio: ["mp3","m4a","aac","wav"],
          stream: ["m3u8"],
        };
        let mediaType = "video";
        if (groups.image.includes(ext)) {
          mediaType = "image";
        } else if (groups.audio.includes(ext)) {
          mediaType = "audio";
        } else if (groups.stream.includes(ext)) {
          mediaType = "stream";
        }
        const mimeMap = {
          video: "video/mp4",
          image: "image/jpeg",
          audio: "audio/mpeg",
          stream: "application/vnd.apple.mpegurl",
        };
        const payload = {
          ok: true,
          platform: "direct",
          type: mediaType === "image" ? "image" : mediaType === "audio" ? "audio" : mediaType === "stream" ? "stream" : "video",
          author: "",
          title: "Direct file",
          thumb: mediaType === "image" ? link : "",
          publishedAt: "",
          items: [{ type: mediaType, quality: "original", mime: mimeMap[mediaType], url: link }]
        };
        renderAll(payload);
        return;
      }

      // Try server resolver
      clearResults();
      emptyState.classList.remove("hidden");
      emptyState.innerHTML = "Resolving link… <span class='small'>This usually takes a moment.</span>";

      try{
        const payload = await resolveViaAPI(link);
        if (!payload?.ok || !payload?.items?.length) throw new Error("No media");
        renderAll(payload);
      }catch(err){
        const message = (err && err.message) ?(err as Error)?.message || "We couldn't fetch media automatically.";
        emptyState.innerHTML = `<b>${message}</b><br><span class='small note'>Ensure the link is public. If you're self-hosting, confirm the worker routes like <code>/api/resolve</code> (and platform aliases such as <code>/api/ig/resolve</code>, <code>/api/yt/resolve</code>) are deployed.</span>`;
      }
    }

    // Bind UI
    $("#fetchBtn").addEventListener("click", onFetch);
    $("#clearBtn").addEventListener("click", () => { urlEl.value=""; clearResults(); });
    $("#pasteBtn").addEventListener("click", async () => {
      try { const t = await navigator.clipboard.readText(); if (t) { urlEl.value = t.trim(); } } catch {}
      urlEl.focus();
    });

    // Auto-fetch if a URL param is present
    const qp = new URLSearchParams(location.search);
    if (qp.has("url")){ urlEl.value = qp.get("url"); onFetch(); }

    // Debounced autovalidation (basic UX)
    urlEl.addEventListener("input", debounce(() => {
      const v = urlEl.value.trim();
      urlEl.setAttribute("aria-invalid", v && !/^https?:\/\//i.test(v) ? "true" : "false");
    }, 120));
  </script>
</body>
</html>
