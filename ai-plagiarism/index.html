<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Ads (optional; kept minimal to avoid CLS) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6216304334889617" crossorigin="anonymous"></script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>AI Plagiarism Checker — UpTools</title>

  <!-- SEO -->
  <meta name="description" content="Free AI plagiarism checker. Paste text and detect similarity with clean, mobile-perfect layout. No overlaps, responsive cards, source snippets, and copy/export." />
  <link rel="canonical" href="https://www.uptools.in/ai-plagiarism/" />
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:large" />
  <meta name="theme-color" content="#0f1419" />

  <!-- Favicon (adjust paths if needed) -->
  <link rel="icon" type="image/svg+xml" href="/assets/logo/uptools-logo.svg" />
  <link rel="apple-touch-icon" href="/assets/logo/uptools-logo.svg" />

  <style>
    /* ---------------- Base & tokens ---------------- */
    :root{
      --bg:#ffffff; --ink:#0f1419; --muted:#4b5563; --line:#e5e7eb;
      --brand:#7c3aed; --brand-ink:#5b21b6; --chip-bg:#f5f3ff;
      --soft:#f9fafb; --card:#ffffff; --code:#fafafa;
      --radius:16px; --radius-sm:12px; --shadow:0 1px 2px rgba(0,0,0,.04);
      --gap:12px;
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:var(--bg); color:var(--ink);}

    /* ---------------- Page shell ---------------- */
    .page{display:grid; grid-template-rows:auto 1fr auto; min-height:100dvh; padding:12px}
    header,footer{position:relative}
    header h1{margin:0; font-size:1.25rem}
    header p{margin:.25rem 0 0; color:var(--muted); font-size:.95rem}

    main{display:grid; gap:var(--gap)}
    .grid{display:grid; gap:var(--gap)}
    @media (min-width:768px){
      .grid{grid-template-columns:1fr 1fr}
    }

    /* ---------------- Card ---------------- */
    .card{background:var(--card); border:1px solid var(--line); border-radius:var(--radius); padding:12px; box-shadow:var(--shadow)}
    .card h2{margin:.25rem 0 .5rem; font-size:1.05rem}
    .row{display:flex; align-items:center; gap:8px; flex-wrap:wrap}
    .chips{display:flex; gap:6px; flex-wrap:wrap}

    /* ---------------- Inputs ---------------- */
    textarea, input[type="text"]{
      width:100%; min-width:0; min-height:140px; padding:10px 12px;
      border:1px solid #d1d5db; border-radius:var(--radius-sm); background:#fff; outline:none; resize:vertical;
    }
    textarea:focus, input[type="text"]:focus{border-color:var(--brand); box-shadow:0 0 0 3px rgba(124,58,237,.15)}
    .actions{display:flex; gap:8px; flex-wrap:wrap}
    button{
      border:0; border-radius:999px; padding:10px 14px; background:var(--brand);
      color:#fff; font-weight:600; cursor:pointer;
    }
    button.secondary{background:#1118270d; color:#111827}
    button.ghost{background:transparent; border:1px solid var(--line); color:#111827}

    /* ---------------- Results ---------------- */
    .results{display:grid; gap:var(--gap)}
    .result-card{display:flex; flex-direction:column; gap:8px; min-width:0}
    .score{display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border-radius:999px; background:var(--chip-bg); color:var(--brand-ink); font-weight:700; font-size:.9rem}
    .meta{font-size:.9rem; color:var(--muted)}
    .output{
      overflow-wrap:anywhere; word-break:break-word;
      background:var(--code); border:1px solid #eee; border-radius:var(--radius-sm); padding:10px; max-width:100%;
    }
    .src-item{padding:8px; border:1px dashed var(--line); border-radius:10px; background:#fff}
    .src-item + .src-item{margin-top:8px}

    /* ---------------- Utilities ---------------- */
    .hidden{display:none !important}
    .spacer{height:8px}
    .flex{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .grow{flex:1 1 auto; min-width:0}
    .right{margin-left:auto}
    .muted{color:var(--muted)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    .small{font-size:.85rem}

    /* ---------------- Loader (inline, non-overlapping) ---------------- */
    .loader{display:inline-flex; align-items:center; gap:8px}
    .dot{width:8px; height:8px; border-radius:50%; background:var(--brand); opacity:.3; animation:bounce 1s infinite}
    .dot:nth-child(2){animation-delay:.15s}
    .dot:nth-child(3){animation-delay:.3s}
    @keyframes bounce{0%,80%,100%{transform:scale(0.8); opacity:.3} 40%{transform:scale(1); opacity:1}}

    /* ---------------- Accessibility regions ---------------- */
    [aria-live]{min-height:1em}
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>AI Plagiarism Checker</h1>
      <p class="small">Paste text, run check, and review sources. Layout is mobile-perfect with no overlaps.</p>
    </header>

    <main>
      <section class="grid">
        <!-- ---------------- Left: Input ---------------- -->
        <article class="card">
          <h2>Paste Text</h2>
          <div class="spacer"></div>

          <label class="small muted" for="textInput">Your text</label>
          <textarea id="textInput" placeholder="Paste or type your text here..."></textarea>

          <div class="spacer"></div>
          <div class="actions">
            <button id="checkBtn" aria-label="Check plagiarism">Check Plagiarism</button>
            <button id="sampleBtn" class="secondary" aria-label="Insert sample text">Use Sample</button>
            <button id="clearBtn" class="ghost" aria-label="Clear input">Clear</button>
            <span id="status" class="small muted" aria-live="polite"></span>
          </div>

          <div class="spacer"></div>
          <div class="chips">
            <span class="score" title="Status chip" id="readyChip">Ready</span>
            <span class="small muted">Engine:</span>
            <select id="engineSelect" aria-label="Choose engine">
              <option value="fake" selected>Built-in Demo</option>
              <option value="api">My Backend (POST /ai)</option>
            </select>
          </div>

          <div class="spacer"></div>
          <details>
            <summary class="small"><strong>How to connect your backend</strong></summary>
            <p class="small">
              Set Engine = “My Backend”. This file will POST to <code class="mono">/ai</code> with:
            </p>
            <pre class="output mono small" style="white-space:pre-wrap">
POST /ai
{
  "provider": "google" | "groq" | "perplexity",
  "model": "your-model",
  "task": "plagiarism_check",
  "text": "…user text…"
}
Expected response shape:
{
  "score": 0-100,
  "verdict": "Low|Medium|High similarity",
  "sources": [{ "title": "...", "url": "...", "match": "..." }]
}</pre>
          </details>
        </article>

        <!-- ---------------- Right: Results ---------------- -->
        <article class="card">
          <h2>Results</h2>
          <div id="results" class="results" aria-live="polite" aria-busy="false">
            <div class="meta">Run a check to see similarity score and sources here.</div>
          </div>
          <div class="spacer"></div>
          <div class="flex">
            <button id="copyBtn" class="secondary">Copy Summary</button>
            <button id="exportBtn" class="ghost">Export JSON</button>
            <span class="right small muted" id="helperMsg" aria-live="polite"></span>
          </div>
        </article>
      </section>
    </main>

    <footer class="small muted" style="padding-top:6px">
      Responsive by design: no fixed heights, no absolute overlays, safe wrapping for long snippets & URLs.
    </footer>
  </div>

  <script type="module">
    // ------- Helpers -------
    const $ = (s)=>document.querySelector(s);
    const el = {
      text: $('#textInput'),
      check: $('#checkBtn'),
      sample: $('#sampleBtn'),
      clear: $('#clearBtn'),
      results: $('#results'),
      readyChip: $('#readyChip'),
      status: $('#status'),
      engine: $('#engineSelect'),
      copy: $('#copyBtn'),
      export: $('#exportBtn'),
      helper: $('#helperMsg'),
    };

    function setBusy(b){
      el.results.setAttribute('aria-busy', String(b));
      el.status.textContent = b ? 'Checking…' : '';
    }

    function loaderNode(){
      const wrap = document.createElement('div');
      wrap.className = 'loader';
      wrap.innerHTML = `<span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="small muted">Analyzing…</span>`;
      return wrap;
    }

    function clamp(n,min,max){return Math.max(min,Math.min(max,n));}

    // Fake local engine (works offline)
    function fakeCheck(text){
      const len = text.trim().length;
      const words = (text.trim().match(/\S+/g)||[]).length;
      const pct = clamp(Math.round((len % 73) + (words % 27)), 0, 100);
      const verdict = pct>70 ? 'High similarity' : pct>35 ? 'Medium similarity' : 'Low similarity';
      const snip = text.substring(0, 160).replace(/\s+/g,' ').trim();
      const synthSources = [
        {title:'Open Web Snippet', url:'#', match: snip ? `“…${snip}…”` : 'Matched phrase'},
        {title:'Generic Knowledge Base', url:'#', match:'“…example paraphrase…”'}
      ];
      return { score: pct, verdict, sources: synthSources };
    }

    // Wire to your /ai backend (unified proxy you built for AI Writer)
    async function apiCheck(text){
      // Choose provider/model via env default on your proxy; change if you expose controls.
      const payload = {
        provider: 'google',        // or 'groq' | 'perplexity'
        model: 'gemini-2.5-flash', // or your default on server
        task: 'plagiarism_check',
        text
      };
      const res = await fetch('/ai', {
        method: 'POST',
        headers: { 'content-type': 'application/json' },
        body: JSON.stringify(payload)
      });
      if(!res.ok){
        const msg = await res.text().catch(()=>res.statusText);
        throw new Error(`API error ${res.status}: ${msg}`);
      }
      return res.json();
    }

    function renderResult(r){
      const card = document.createElement('article');
      card.className = 'result-card card';
      const scoreChip = `<span class="score">Similarity: ${Math.round(r.score)}%</span>`;
      const meta = `<span class="meta">${r.verdict || ''}</span>`;
      const sources = (Array.isArray(r.sources) ? r.sources : []).map(s => `
        <div class="src-item">
          <div style="font-weight:600">${s.title || 'Source'}</div>
          <div class="small muted">${s.url ? `<a href="${s.url}" rel="nofollow noopener">${s.url}</a>` : ''}</div>
          <div class="output" style="margin-top:6px">${(s.match||'').toString()}</div>
        </div>
      `).join('');

      card.innerHTML = `
        <div class="row">
          ${scoreChip}
          ${meta}
        </div>
        <div class="output" role="region" aria-label="Summary">
          <div><strong>Summary:</strong> ${r.summary || 'Similarity analysis completed.'}</div>
        </div>
        <div class="spacer"></div>
        <div class="results">
          ${sources || '<div class="meta">No sources returned.</div>'}
        </div>
      `;
      return card;
    }

    function summarizeForCopy(r){
      const lines = [
        `Similarity: ${Math.round(r.score)}%`,
        `Verdict: ${r.verdict}`,
        `Sources:`
      ];
      (r.sources||[]).forEach((s,i)=>{
        lines.push(`  ${i+1}. ${s.title || 'Source'}${s.url?` — ${s.url}`:''}`);
      });
      return lines.join('\n');
    }

    // ------- Events -------
    el.sample.addEventListener('click', ()=>{
      el.text.value =
`Artificial intelligence is rapidly transforming industries by automating routine tasks and enabling more accurate decision-making. From healthcare to agriculture, AI-driven solutions are improving efficiency, reducing costs, and unlocking new possibilities for innovation. However, this growth raises questions about ethics and the impact on jobs.`;
      el.text.focus();
      el.helper.textContent = 'Sample inserted.';
    });

    el.clear.addEventListener('click', ()=>{
      el.text.value = '';
      el.results.innerHTML = '<div class="meta">Cleared. Paste text and run a new check.</div>';
      el.helper.textContent = 'Input cleared.';
    });

    el.check.addEventListener('click', async ()=>{
      const text = el.text.value || '';
      if(!text.trim()){ alert('Please paste some text first.'); return; }

      el.results.innerHTML = '';
      el.results.appendChild(loaderNode());
      el.readyChip.textContent = 'Working…';
      setBusy(true);

      try{
        const engine = el.engine.value;
        const data = engine === 'api' ? await apiCheck(text) : fakeCheck(text);
        el.results.innerHTML = ''; // clear loader
        el.results.appendChild(renderResult(data));
        el.helper.textContent = 'Done.';
        el.readyChip.textContent = 'Done';
      }catch(err){
        el.results.innerHTML = `<div class="output">Error: ${(err && err.message) || err}</div>`;
        el.helper.textContent = 'Failed.';
        el.readyChip.textContent = 'Error';
      }finally{
        setBusy(false);
      }
    });

    el.copy.addEventListener('click', async ()=>{
      const block = el.results.querySelector('.result-card');
      if(!block){ el.helper.textContent='Nothing to copy yet.'; return; }

      // Build data from DOM (or store last result globally if you prefer)
      const score = block.querySelector('.score')?.textContent || '';
      const verdict = block.querySelector('.meta')?.textContent || '';
      const sources = Array.from(block.querySelectorAll('.src-item')).map((n,i)=>{
        const title = n.querySelector('div:first-child')?.textContent?.trim() || `Source ${i+1}`;
        const url = n.querySelector('a')?.getAttribute('href') || '';
        return `${i+1}. ${title}${url?` — ${url}`:''}`;
      }).join('\n');

      const text = `${score}\n${verdict}\nSources:\n${sources || 'None'}`;
      await navigator.clipboard.writeText(text).catch(()=>{});
      el.helper.textContent = 'Summary copied.';
    });

    el.export.addEventListener('click', ()=>{
      const card = el.results.querySelector('.result-card');
      if(!card){ el.helper.textContent='Nothing to export.'; return; }

      // Reconstruct JSON from DOM
      const score = (card.querySelector('.score')?.textContent.match(/\d+/)?.[0])|0;
      const verdict = (card.querySelector('.row .meta')?.textContent||'').trim();
      const sources = Array.from(card.querySelectorAll('.src-item')).map(n=>{
        return {
          title: n.querySelector('div:first-child')?.textContent?.trim() || 'Source',
          url: n.querySelector('a')?.getAttribute('href') || '',
          match: n.querySelector('.output')?.textContent?.trim() || ''
        };
      });
      const obj = { score, verdict, sources };

      const blob = new Blob([JSON.stringify(obj,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'plagiarism-result.json';
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
      el.helper.textContent = 'Exported JSON.';
    });

    // Accessibility nicety: announce input length as user types (no overlap)
    let announceTimer;
    el.text.addEventListener('input', ()=>{
      clearTimeout(announceTimer);
      announceTimer = setTimeout(()=>{
        el.status.textContent = `Characters: ${el.text.value.length}`;
      }, 150);
    });
  </script>
</body>
</html>
