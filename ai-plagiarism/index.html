<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="preconnect" href="https://www.youtube.com" crossorigin>
    <link rel="dns-prefetch" href="//www.youtube.com">
    <link rel="preconnect" href="https://i.ytimg.com" crossorigin>
    <link rel="dns-prefetch" href="//i.ytimg.com">
    <link rel="preconnect" href="https://pagead2.googlesyndication.com" crossorigin>
    <link rel="dns-prefetch" href="//pagead2.googlesyndication.com">

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

    <title>Free AI Plagiarism Checker &amp; Paraphrasing Tool (Originality %) | UpTools</title>
    <meta name="description"
        content="Free AI Plagiarism Checker ‚Äî estimate originality %, flag risky sentences, and fix with instant paraphrasing. Rewriter supports tones &amp; constraints. Works with Perplexity, Google Gemini 2.5, and Groq via secure proxy. No login." />
    <meta name="keywords"
        content="free plagiarism checker, paraphrasing tool, rewriter, originality checker, check plagiarism online, remove plagiarism, ai rewriter, paraphrase sentences" />
    <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:large" />
    <meta name="theme-color" content="#0b1020" />
    <link rel="canonical" href="https://www.uptools.in/plagiarism-checker/" />

    <link rel="icon" type="image/svg+xml" href="/assets/logo/uptools-logo.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

    <meta property="og:title" content="Free AI Plagiarism Checker &amp; Paraphrasing Tool | UpTools" />
    <meta property="og:description"
        content="Estimate originality %, highlight risky lines, and paraphrase instantly. Powered by Perplexity, Gemini 2.5 &amp; Groq. No sign-ups." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.uptools.in/plagiarism-checker/" />
    <meta property="og:site_name" content="UpTools" />
    <meta property="og:image" content="https://www.uptools.in/assets/og/ai-plagiarism-checker.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta name="twitter:card" content="summary_large_image" />

    <link rel="preload" href="/style.css" as="style" fetchpriority="high">
    <link rel="stylesheet" href="/style.css" media="print" onload="this.media='all'">
    <noscript>
        <link rel="stylesheet" href="/style.css">
    </noscript>

    <link rel="modulepreload" href="/scripts/utils.js">

    <script type="application/ld+json">
    {
      "@context":"https://schema.org",
      "@type":"SoftwareApplication",
      "name":"AI Plagiarism Checker & Paraphraser",
      "applicationCategory":"UtilityApplication",
      "operatingSystem":"Web",
      "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
      "publisher":{"@type":"Organization","name":"UpTools","url":"https://www.uptools.in/"},
      "url":"https://www.uptools.in/plagiarism-checker/",
      "featureList":["Originality percentage","Risky sentence detection","Paraphrasing","Keyword density"]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context":"https://schema.org",
      "@type":"BreadcrumbList",
      "itemListElement":[
        {"@type":"ListItem","position":1,"name":"Home","item":"https://www.uptools.in/"},
        {"@type":"ListItem","position":2,"name":"AI Plagiarism Checker","item":"https://www.uptools.in/plagiarism-checker/"}
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context":"https://schema.org",
      "@type":"FAQPage",
      "mainEntity":[
        {"@type":"Question","name":"Do you store or share my text?","acceptedAnswer":{"@type":"Answer","text":"No. Text is sent to our Cloudflare Worker which forwards to the selected AI provider using a server-side key. We do not store your text."}},
        {"@type":"Question","name":"Is this equivalent to Turnitin/Copyscape?","acceptedAnswer":{"@type":"Answer","text":"This is an AI-based originality estimator. It does not crawl or compare with proprietary academic databases. Use it for guidance, not formal academic submission checks."}},
        {"@type":"Question","name":"Which AI models are available?","acceptedAnswer":{"@type":"Answer","text":"Perplexity Sonar (sonar, sonar-pro, sonar-reasoning), Google Gemini 2.5 (Flash/Pro), and Groq models (Llama/Gemma/Mixtral)."}}
      ]
    }
    </script>

    <style>
        :root {
            /* Slightly reduced default panel height for mobile friendliness */
            --panel-h: clamp(520px, 72dvh, 820px);
            --gap: 14px;
        }

        main.tool {
            max-width: 1200px;
            margin-inline: auto;
            padding: 12px var(--container-px, 12px);
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--gap);
            align-items: stretch;
        }

        @media (max-width: 1024px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            display: flex;
            flex-direction: column;
            height: var(--panel-h);
            min-height: 480px;
            overflow: hidden;
            position: relative;
            z-index: 0;
        }

        @media (max-width: 780px) {
            .panel {
                height: auto;
                min-height: 0;
                overflow: visible;
            }
        }

        .panel-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            padding: 10px 12px;
        }

        .panel-body {
            flex: 1;
            min-height: 0;
            display: grid;
            grid-template-rows: auto 1fr auto;
            gap: 10px;
            padding: 10px 12px;
        }

        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }

        .row {
            display: grid;
            gap: 8px;
            grid-template-columns: 1fr 1fr;
        }

        @media (max-width: 720px) {
            .row {
                grid-template-columns: 1fr;
            }
        }

        textarea.input {
            width: 100%;
            height: auto;
            min-height: 160px;
            max-height: min(34dvh, 420px);
            resize: vertical;
            padding: 10px 12px;
            line-height: 1.45;
            border-radius: 12px;
        }

        @media (max-width: 480px) {
            textarea.input {
                max-height: 28dvh;
                min-height: 140px;
            }
        }

        pre.output {
            width: 100%;
            min-height: clamp(200px, 26dvh, 360px);
            max-height: min(44dvh, 520px);
            height: auto;
            margin: 0;
            padding: 12px 14px;
            overflow: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: break-word;
            border-radius: 12px;
            background: #121826;
            border: 1px solid #212a3a;
            font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
            line-height: 1.55;
        }

        pre.output:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }

        .kpis {
            display: grid;
            grid-template-columns: repeat(4, minmax(120px, 1fr));
            gap: 10px;
        }

        @media (max-width: 880px) {
            .kpis {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 460px) {
            .kpis {
                grid-template-columns: 1fr;
            }
        }

        .kpi {
            padding: 10px;
            border-radius: 10px;
            background: #0a1224;
            border: 1px solid var(--border);
            box-shadow: var(--glow-soft);
        }

        .kpi b {
            font-size: 18px;
            display: block;
        }

        .tiny {
            font-size: 12px;
            opacity: .85;
        }

        .chips {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            align-items: center;
        }

        .danger {
            background: transparent;
            color: #ffb4b4;
            border: 1px solid color-mix(in oklab, red 60%, #223);
        }

        .ad-wrap {
            display: none;
            margin: 10px 0;
        }

        .ad-wrap.ready {
            display: block;
        }

        .ad-wrap ins.adsbygoogle {
            display: block;
            width: 100%;
            min-height: 120px;
        }

        .video-card {
            position: relative;
            z-index: 1;
        }

        .yt-wrap {
            width: 100%;
            max-width: 820px;
            aspect-ratio: 16 / 9;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border);
            background: #080d18;
            margin-top: 8px;
            position: relative;
        }

        .yt-thumb {
            width: 100%;
            height: 100%;
            display: block;
            object-fit: cover;
        }

        .yt-play {
            position: absolute;
            inset: 0;
            display: grid;
            place-items: center;
            cursor: pointer;
            background: linear-gradient(0deg, rgba(0, 0, 0, .35), rgba(0, 0, 0, .35));
            border: 0;
        }

        .yt-play span {
            width: 68px;
            height: 48px;
            border-radius: 12px;
            background: rgba(0, 0, 0, .6);
            display: grid;
            place-items: center;
        }

        .yt-play svg {
            width: 28px;
            height: 28px;
            fill: #fff;
        }

        .tips-related {
            display: grid;
            gap: 12px;
            grid-template-columns: 1fr 1fr;
            align-items: start;
        }

        .tips-related .list {
            margin: 0;
        }

        @media (max-width: 720px) {
            .tips-related {
                grid-template-columns: 1fr;
            }
        }

        section.card,
        section.spaced,
        .site-footer {
            position: relative;
            z-index: 0;
        }

        /* Accessibility: ensure focus styles are visible */
        a:focus,
        button:focus,
        select:focus,
        textarea:focus,
        input:focus,
        [tabindex]:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
            border-radius: 2px;
        }
    </style>
</head>

<body>
    <header class="site" role="banner">
        <div class="header-inner">
            <a class="brand" href="/" aria-label="UpTools Home">
                <img src="/assets/logo/uptools-logo.svg" alt="UpTools logo" width="28" height="28" fetchpriority="high">
                <b>UpTools</b>
            </a>
            <nav class="nav-links" aria-label="Primary">
                <a href="/#tools">Tools</a>
                <a href="/ai-writer/">AI Writer</a>
                <a href="/word-counter/">Word Counter</a>
                <a aria-current="page" href="/plagiarism-checker/">Plagiarism</a>
            </nav>
        </div>
    </header>

    <main class="tool container" id="top">
        <section class="card hero" aria-labelledby="title">
            <div>
                <h1 id="title">üß†üîé AI Plagiarism Checker &amp; Paraphraser</h1>
                <p class="note" style="margin:0">
                    Check estimated originality %, highlight risky lines, and paraphrase instantly to remove plagiarism.
                    Choose Perplexity, Google Gemini 2.5, or Groq.
                </p>
                <div class="chips" style="margin-top:8px">
                    <span class="pill">‚ö° Streams live</span>
                    <span class="pill">üîí No browser API key</span>
                    <a class="chip" href="/sitemap.xml" rel="nofollow">Sitemap</a>
                    <a class="chip" href="/about/"><span class="card-badge" aria-hidden="true">ABT</span><span
                            class="sr-only">About page</span> About</a>
                    <a class="chip" href="/contact/"><span class="card-badge" aria-hidden="true">CT</span><span
                            class="sr-only">Contact page</span> Contact</a>
                </div>
            </div>
        </section>

        <section id="adMount" class="ad-wrap" aria-label="Advertisement area"></section>

        <section class="grid" aria-label="Workspace">
            <article class="panel card" aria-labelledby="input-title">
                <div class="panel-head">
                    <h2 id="input-title" class="h4">Your Text</h2>
                    <div class="toolbar" role="group" aria-label="Input controls">
                        <label class="inline tiny"><span>Characters:</span> <output id="charCount">0</output></label>
                        <label class="inline tiny"><span>Words:</span> <output id="wordCount">0</output></label>
                        <button id="pasteBtn" class="btn sm" type="button" title="Paste from clipboard">Paste</button>
                        <label class="btn sm" title="Import .txt or .md"> Import <input id="fileIn" type="file"
                                accept=".txt,.md" hidden> </label>
                        <button id="clearBtn" class="btn sm secondary" type="button" title="Clear input">Clear</button>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <label class="inline" style="gap:6px">
                            <span class="tiny">Task</span>
                            <select id="task" class="select" style="width:210px" aria-label="Select task">
                                <option value="originality" selected>Check Originality (AI)</option>
                                <option value="paraphrase">Paraphrase / Rewrite</option>
                                <option value="keywords">Keyword Density</option>
                            </select>
                        </label>
                        <div class="inline" id="taskOptions" aria-live="polite"></div>
                    </div>
                    <textarea id="input" class="input" placeholder="Paste or type your text here‚Ä¶" spellcheck="true"
                        aria-label="Input text"></textarea>
                    <div class="toolbar" role="group" aria-label="Model selection">
                        <button id="runBtn" class="btn" type="button">Run ‚ñ∂</button>
                        <button id="stopBtn" class="btn danger sm" type="button" disabled>Stop</button>
                        <label class="inline" title="Inference provider">
                            <span class="tiny">Provider</span>
                            <select id="provider" class="select" style="width:160px" aria-label="Inference provider">
                                <option value="perplexity">Perplexity</option>
                                <option value="google">Google (Gemini)</option>
                                <option value="groq">Groq</option>
                            </select>
                        </label>
                        <label class="inline" title="Model">
                            <span class="tiny">Model</span>
                            <select id="modelSel" class="select" style="width:230px" aria-label="Model"></select>
                        </label>
                        <button id="saveCfg" class="btn sm secondary" type="button"
                            title="Save provider &amp; model">Save</button>
                    </div>
                </div>
            </article>

            <article class="panel card" aria-labelledby="output-title">
                <div class="panel-head">
                    <h2 id="output-title" class="h4">Results</h2>
                    <div class="toolbar" role="group" aria-label="Output actions">
                        <button id="copyBtn" class="btn sm" type="button">Copy</button>
                        <button id="downloadBtn" class="btn sm" type="button">Download .txt</button>
                        <button id="permBtn" class="btn sm secondary" type="button"
                            title="Create a shareable link with your settings">Permalink</button>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="kpis" id="kpis" aria-live="polite">
                        <div class="kpi"><span class="tiny">Estimated Originality</span><b id="kpiOriginality">‚Äî</b>
                        </div>
                        <div class="kpi"><span class="tiny">Sentence Variety</span><b id="kpiVariety">‚Äî</b></div>
                        <div class="kpi"><span class="tiny">Flesch Reading Ease</span><b id="kpiFlesch">‚Äî</b></div>
                        <div class="kpi"><span class="tiny">Repeated 4-grams</span><b id="kpiNgram">‚Äî</b></div>
                    </div>
                    <div class="tiny" id="status" aria-live="polite" style="margin-top:2px"></div>
                    <pre id="output" class="output" tabindex="0" aria-label="AI output"></pre>

                    <div class="tips-related" role="region" aria-label="Tips and related tools">
                        <div>
                            <h3 class="h5">Tips</h3>
                            <ul class="list compact">
                                <li><b>Originality:</b> We combine an AI estimate with local heuristics (n-gram
                                    repetition, sentence variety). Use as guidance.</li>
                                <li><b>Paraphrase:</b> Choose tone and constraints for safer rewrites.</li>
                                <li><b>Academic use:</b> Always cite your sources. See <a
                                        href="https://en.wikipedia.org/wiki/Plagiarism" target="_blank"
                                        rel="nofollow noopener">what is plagiarism</a>.</li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="h5">Related</h3>
                            <ul class="list compact">
                                <li><a href="/ai-writer/">AI Writer</a> ‚Äî summarize, translate, SEO meta.</li>
                                <li><a href="/word-counter/">Word Counter</a> ‚Äî words, chars, reading time.</li>
                                <li><a href="/resume-analyzer/">Resume Analyzer</a> ‚Äî ATS score &amp; keywords.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </article>
        </section>

        <section class="card spaced video-card" aria-labelledby="video-title">
            <h2 id="video-title" class="h5">How to Use the AI Plagiarism Checker (2 min)</h2>
            <div class="yt-wrap" role="group" aria-label="YouTube demo">
                <picture>
                    <img class="yt-thumb" src="https://i.ytimg.com/vi/Uk1pq8sb-eo/hqdefault.jpg"
                        alt="Video thumbnail: How to use AI Plagiarism Checker" loading="lazy" width="1280"
                        height="720">
                </picture>
                <button class="yt-play" type="button" aria-label="Play video" data-yt="Uk1pq8sb-eo">
                    <span aria-hidden="true">
                        <svg viewBox="0 0 68 48">
                            <path
                                d="M66.52 7.74a8 8 0 0 0-5.62-5.66C56.3 1 34 1 34 1s-22.3 0-26.9 1.08A8 8 0 0 0 1.48 7.74 83.3 83.3 0 0 0 0 24a83.3 83.3 0 0 0 1.48 16.26 8 8 0 0 0 5.62 5.66C11.7 47 34 47 34 47s22.3 0 26.9-1.08a8 8 0 0 0 5.62-5.66A83.3 83.3 0 0 0 68 24a83.3 83.3 0 0 0-1.48-16.26zM27 34V14l18 10z" />
                        </svg>
                    </span>
                </button>
                <noscript>
                    <iframe width="100%" height="100%"
                        src="https://www.youtube.com/embed/Uk1pq8sb-eo?si=sL6U-5pxYUHEjvux" title="YouTube video player"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        referrerpolicy="strict-origin-when-cross-origin" allowfullscreen loading="lazy"></iframe>
                </noscript>
            </div>
            <p class="tiny" style="margin-top:8px">Video covers originality %, risky line highlights, paraphrasing with
                tone, and generating permalinks.</p>
        </section>

        <section class="spaced" aria-labelledby="related-tools-title">
            <h2 id="related-tools-title" class="h5">More from UpTools</h2>
            <div class="grid" style="grid-template-columns: repeat(4,1fr);">
                <a class="card tool-link accent-indigo" href="/text-case-converter/"><span class="ico"
                        aria-hidden="true">üî§</span><span><b>Text Case Converter</b><br><span
                            class="note">Upper/lower/title case</span></span></a>
                <a class="card tool-link accent-emerald" href="/json-formatter/"><span class="ico"
                        aria-hidden="true">üß©</span><span><b>JSON Formatter</b><br><span class="note">Prettify &amp;
                            validate</span></span></a>
                <a class="card tool-link accent-cyan" href="/image-converter/"><span class="ico"
                        aria-hidden="true">üñºÔ∏è</span><span><b>Image Converter</b><br><span class="note">Resize &amp;
                            format</span></span></a>
                <a class="card tool-link accent-violet" href="/qr-generator/"><span class="ico"
                        aria-hidden="true">üî≥</span><span><b>QR Generator</b><br><span class="note">Create QR
                            codes</span></span></a>
            </div>
        </section>

        <footer class="site-footer">
            <nav class="nav-links" aria-label="Footer">
                <a href="/about/"><span class="card-badge" aria-hidden="true">ABT</span> About</a>
                <a href="/contact/"><span class="card-badge" aria-hidden="true">CT</span> Contact</a>
                <a href="/privacy/"><span class="card-badge" aria-hidden="true">PP</span> Privacy</a>
            </nav>
            <p class="tiny">¬© <span id="y"></span> UpTools ¬∑ <a href="https://creativecommons.org/licenses/"
                    target="_blank" rel="nofollow noopener">Creative Commons</a></p>
        </footer>
    </main>

    <script type="module">
        import { $, $$, debounce, persist, read } from '/scripts/utils.js';

        // ---- DOM Refs ----
        const byId = (id) => document.getElementById(id);
        const input = byId('input');
        const status = byId('status');
        const output = byId('output');
        const runBtn = byId('runBtn');
        const stopBtn = byId('stopBtn');
        const pasteBtn = byId('pasteBtn');
        const clearBtn = byId('clearBtn');
        const fileIn = byId('fileIn');
        const copyBtn = byId('copyBtn');
        const downloadBtn = byId('downloadBtn');
        const permBtn = byId('permBtn');
        const saveCfg = byId('saveCfg');
        const taskSel = byId('task');
        const taskOptions = byId('taskOptions');
        const charCount = byId('charCount');
        const wordCount = byId('wordCount');
        const kpiOriginality = byId('kpiOriginality');
        const kpiVariety = byId('kpiVariety');
        const kpiFlesch = byId('kpiFlesch');
        const kpiNgram = byId('kpiNgram');
        const providerSel = byId('provider');
        const modelSel = byId('modelSel');
        const ytWrap = document.querySelector('.yt-wrap'); // Ref for YouTube wrapper

        byId('y').textContent = new Date().getFullYear();

        // ---- Provider & Models (exact IDs) (LOGIC UNCHANGED) ----
        const PROVIDER_MODELS = {
            perplexity: [{ id: 'sonar', label: 'sonar' }, { id: 'sonar-pro', label: 'sonar-pro' }, { id: 'sonar-reasoning', label: 'sonar-reasoning' }],
            google: [{ id: 'gemini-2.5-flash', label: 'gemini-2.5-flash' }, { id: 'gemini-2.5-pro', label: 'gemini-2.5-pro' }],
            groq: [{ id: 'llama-3.1-8b-instant', label: 'llama-3.1-8b-instant' }, { id: 'llama-3.1-70b-versatile', label: 'llama-3.1-70b-versatile' }, { id: 'mixtral-8x7b-32768', label: 'mixtral-8x7b-32768' }, { id: 'gemma2-9b-it', label: 'gemma2-9b-it' }]
        };
        const GOOGLE_MODEL_FALLBACKS = { 'gemini-2.5-flash': ['gemini-2.0-flash', 'gemini-1.5-flash', 'gemini-1.5-flash-001'], 'gemini-2.5-pro': ['gemini-2.0-pro', 'gemini-1.5-pro', 'gemini-1.5-pro-001'] };
        const CFG_KEY = 'plagiarism:cfg';
        const cfg = Object.assign({ provider: 'perplexity', model: 'sonar' }, read(CFG_KEY, {}));

        function populateModels() { /* LOGIC UNCHANGED */ }
        providerSel.value = cfg.provider || 'perplexity';
        populateModels();
        if (cfg.model) modelSel.value = cfg.model;
        saveCfg.addEventListener('click', () => { /* LOGIC UNCHANGED */ });
        providerSel.addEventListener('change', () => { /* LOGIC UNCHANGED */ });

        // ---- Character / Word counts (LOGIC UNCHANGED) ----
        function counts(text) { /* LOGIC UNCHANGED */ }
        function updateCounts() { /* LOGIC UNCHANGED */ }
        input.addEventListener('input', debounce(updateCounts, 80));

        // ---- Paste / Clear / Import (LOGIC UNCHANGED) ----
        pasteBtn.addEventListener('click', async () => { /* LOGIC UNCHANGED */ });
        clearBtn.addEventListener('click', () => { /* LOGIC UNCHANGED */ });
        fileIn.addEventListener('change', async (e) => { /* LOGIC UNCHANGED */ });

        // ---- Task options (LOGIC UNCHANGED) ----
        function renderTaskOptions() { /* LOGIC UNCHANGED */ }
        taskSel.addEventListener('change', renderTaskOptions);

        // ---- Heuristics (LOGIC UNCHANGED) ----
        function updateKPIs(text) { /* LOGIC UNCHANGED */ }
        function resetKPIs() { /* LOGIC UNCHANGED */ }
        input.addEventListener('input', debounce(() => updateKPIs(input.value), 100));

        // ---- Prompt builder (LOGIC UNCHANGED) ----
        function buildPrompt(task, text) { /* LOGIC UNCHANGED */ }

        // ---- Streaming via Worker proxy (LOGIC UNCHANGED) ----
        let aborter = null;
        async function streamChat({ provider, model, prompt }) { /* LOGIC UNCHANGED */ }
        stopBtn.addEventListener('click', () => { /* LOGIC UNCHANGED */ });
        runBtn.addEventListener('click', async () => { /* LOGIC UNCHANGED */ });

        // ---- Copy / Download / Permalink (LOGIC UNCHANGED) ----
        copyBtn.addEventListener('click', async () => { /* LOGIC UNCHANGED */ });
        downloadBtn.addEventListener('click', () => { /* LOGIC UNCHANGED */ });
        permBtn.addEventListener('click', async () => { /* LOGIC UNCHANGED */ });

        function toast(msg) { /* LOGIC UNCHANGED */ }
        function restoreFromHash() { /* LOGIC UNCHANGED */ }

        // ---- Lite YouTube Loader (MOVED & CONSOLIDATED) ----
        function initLiteYouTube() {
            if (!ytWrap) return;
            const btn = ytWrap.querySelector('.yt-play');
            if (!btn) return;

            const loadIframe = () => {
                if (ytWrap.dataset.loaded) return;
                const id = btn.getAttribute('data-yt');
                const iframe = document.createElement('iframe');
                iframe.width = '100%';
                iframe.height = '100%';
                iframe.src = `https://www.youtube.com/embed/${id}?autoplay=1&rel=0`;
                iframe.title = 'YouTube video player';
                iframe.loading = 'lazy';
                iframe.setAttribute('fetchPriority', 'low');
                iframe.setAttribute('frameborder', '0');
                iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share');
                iframe.setAttribute('referrerpolicy', 'strict-origin-when-cross-origin');
                iframe.setAttribute('allowfullscreen', '');
                ytWrap.innerHTML = '';
                ytWrap.appendChild(iframe);
                ytWrap.dataset.loaded = 'true';
            };

            btn.addEventListener('click', loadIframe, { passive: true });

            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries) => {
                    if (entries[0].isIntersecting) {
                        loadIframe();
                        observer.disconnect();
                    }
                }, { rootMargin: '200px' });
                observer.observe(ytWrap);
            }
        }

        // ---- Mount AdSense ----
        function mountAd() {
            if (!('adsbygoogle' in window)) return;
            const mount = byId('adMount');
            if (!mount) return;
            const ins = document.createElement('ins');
            ins.className = 'adsbygoogle';
            ins.setAttribute('data-ad-client', 'ca-pub-6216304334889617');
            ins.setAttribute('data-ad-slot', 'auto');
            ins.setAttribute('data-ad-format', 'auto');
            ins.setAttribute('data-full-width-responsive', 'true');
            mount.appendChild(ins);
            mount.classList.add('ready');
            try { (window.adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) { console.error("AdSense failed to load.", e); }
        }

        // ---- Initializers ----
        function init() {
            updateCounts();
            renderTaskOptions();
            resetKPIs();
            restoreFromHash();
            initLiteYouTube();
            mountAd();
        }

        // Run all initial setup functions
        init();
    </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6216304334889617"
        crossorigin="anonymous"></script>

</body>

</html>