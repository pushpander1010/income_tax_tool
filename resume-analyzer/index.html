<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google Ads (only mounts an <ins> if available, to avoid layout shift) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6216304334889617"
    crossorigin="anonymous"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ATS Resume Checker ‚Äî PDF, DOCX & TXT | Match Against Job Description | UpTools</title>

  <!-- Canonical & Icons -->
  <link rel="canonical" href="https://www.uptools.in/resume-ats-checker/" />
  <link rel="icon" sizes="50x50" type="image/svg+xml" href="/assets/logo/uptools-logo.svg" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/logo/uptools-logo.svg" />

  <!-- SEO -->
  <meta name="description"
    content="Free ATS Resume Checker that works with PDF, DOCX, and TXT. Analyze resume sections, keywords, formatting, and match your resume against a job description to improve your interview chances." />
  <meta name="keywords"
    content="ATS resume checker, resume ATS scan, resume vs job description, resume keyword match, resume parser, resume analyzer, docx pdf txt" />
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:large" />
  <meta name="theme-color" content="#0b1020" />

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="ATS Resume Checker ‚Äî PDF, DOCX & TXT" />
  <meta property="og:description"
    content="Upload your resume and optionally a job description. Get ATS checks, keyword coverage, and actionable fixes." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.uptools.in/resume-ats-checker/" />
  <meta property="og:image" content="https://www.uptools.in/assets/og/ats-resume-checker.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- CSS (shared, non-blocking) -->
  <link rel="preload" href="/style.css" as="style">
  <link rel="stylesheet" href="/style.css" media="print" onload="this.media='all'">
  <noscript>
    <link rel="stylesheet" href="/style.css">
  </noscript>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"ATS Resume Checker",
    "applicationCategory":"BusinessApplication",
    "operatingSystem":"Web",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
    "publisher":{"@type":"Organization","name":"UpTools","url":"https://www.uptools.in/"},
    "featureList":[
      "PDF, DOCX & TXT support",
      "General ATS compliance scan",
      "Resume vs Job Description match",
      "Keyword coverage & gaps",
      "Section completeness & contact checks"
    ]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://www.uptools.in/"},
      {"@type":"ListItem","position":2,"name":"ATS Resume Checker","item":"https://www.uptools.in/resume-ats-checker/"}
    ]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"Which file types are supported?",
       "acceptedAnswer":{"@type":"Answer","text":"PDF, DOCX (Word), and TXT for both resume and job description. Legacy .doc is not fully supported‚Äîplease convert to PDF/DOCX."}},
      {"@type":"Question","name":"Do you store my documents?",
       "acceptedAnswer":{"@type":"Answer","text":"No. All parsing and analysis runs in your browser only."}},
      {"@type":"Question","name":"What does the ATS check include?",
       "acceptedAnswer":{"@type":"Answer","text":"Section completeness, contact info, formatting flags, keyword coverage, and optional JD match score with missing & suggested keywords."}}
    ]
  }
  </script>

  <style>
    :root {
      --panel-h: clamp(560px, 84dvh, 860px);
      --gap: 14px;
    }

    main.tool {
      max-width: 1080px;
      margin-inline: auto;
      padding: 12px var(--container-px, 12px);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--gap);
      align-items: stretch;
    }

    @media (max-width: 980px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }

    .panel {
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 10px;
      min-height: 420px;
    }

    .panel .head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .drop {
      border: 1px dashed color-mix(in oklab, var(--accent) 45%, #314);
      padding: 12px;
      border-radius: 12px;
    }

    .drop.over {
      outline: 3px solid color-mix(in oklab, var(--accent) 55%, white);
    }

    .mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
    }

    .kgrid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
    }

    .meter-wrap {
      background: #0b1326;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 8px;
    }

    .meter {
      height: 10px;
      border-radius: 8px;
      background: #0a1224;
      overflow: hidden;
    }

    .bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transition: width .4s ease;
    }

    .badge {
      display: inline-block;
      padding: 4px 8px;
      border: 1px solid var(--border);
      border-radius: 999px;
      font-size: 12px;
    }

    .ad-slot {
      display: none;
    }

    /* mounted only if adsbygoogle exists */
  </style>
</head>

<body>
  <!-- Header -->
  <header class="site" role="banner">
    <div class="header-inner">
      <a class="brand" href="/" aria-label="UpTools Home">
        <img src="/assets/logo/uptools-logo.svg" alt="UpTools logo" width="28" height="28" loading="eager">
        <b>UpTools</b>
      </a>
      <nav class="nav-links" aria-label="Primary">
        <a href="/#tools">Tools</a>
        <a href="/ai-writer/">AI Writer</a>
        <a href="/word-counter/">Word Counter</a>
        <a href="/text-case-converter/">Text Case</a>
      </nav>
    </div>
  </header>

  <main class="tool container" id="top">
    <!-- Hero -->
    <section class="card hero" aria-labelledby="title">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="tool-icon" aria-hidden="true">üìÑ</div>
        <div>
          <h1 id="title">ATS Resume Checker (PDF ‚Ä¢ DOCX ‚Ä¢ TXT)</h1>
          <p class="note">Analyze resume sections, contact info, formatting, and keyword coverage. Optionally upload a
            Job Description to get a match score & gaps.</p>
          <div class="chips" style="margin-top:8px">
            <span class="pill">üîí Browser‚Äëonly parsing</span>
            <span class="pill">üß† Smart keyword suggestions</span>
            <a class="chip" href="/sitemap.xml">Sitemap</a>
          </div>
        </div>
      </div>
    </section>

    <!-- (Conditional) Ad space ‚Äì inserted only if adsbygoogle is present -->
    <div id="ad-mount"></div>

    <!-- Workspace -->
    <section class="grid-2" aria-label="ATS workspace">
      <!-- LEFT: Inputs -->
      <article class="card panel">
        <div class="head">
          <h2 class="h4">Upload Resume & (Optional) Job Description</h2>
          <div class="tiny-note">Supported: <b>PDF</b>, <b>DOCX</b>, <b>TXT</b></div>
        </div>

        <div class="drop" id="dropZone" aria-label="Drop files">
          <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
            <div>
              <label class="label">Resume file</label>
              <input id="resumeFile" class="input" type="file" accept=".pdf,.docx,.txt,.doc" />
              <div class="tiny-note">Tip: Prefer DOCX/TXT for best parsing. Legacy .doc may not parse fully.</div>
            </div>
            <div>
              <label class="label">Job Description (optional)</label>
              <input id="jdFile" class="input" type="file" accept=".pdf,.docx,.txt,.doc" />
              <div class="tiny-note">Or paste JD text below.</div>
            </div>
          </div>

          <div class="row" style="display:grid;grid-template-columns:1fr;gap:10px;margin-top:8px">
            <div>
              <label class="label">Job Description (paste text, optional)</label>
              <textarea id="jdText" class="textarea"
                placeholder="Paste JD here to check match score & missing keywords‚Ä¶"></textarea>
            </div>
          </div>
        </div>

        <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:flex-end">
          <button id="analyzeBtn" class="btn" type="button">Analyze ‚ñ∂</button>
          <button id="clearBtn" class="btn secondary" type="button">Clear</button>
        </div>
      </article>

      <!-- RIGHT: Results -->
      <article class="card panel" aria-labelledby="result-title">
        <div class="head">
          <h2 id="result-title" class="h4">Results</h2>
          <div class="tiny-note" id="status" aria-live="polite"></div>
        </div>

        <div style="display:grid;gap:10px;overflow:auto">
          <div class="meter-wrap">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:6px">
              <div><b>ATS Readability</b> <span class="note">(sections & formatting)</span></div>
              <div class="badge mono" id="atsScoreLbl">0%</div>
            </div>
            <div class="meter">
              <div class="bar" id="atsBar"></div>
            </div>
          </div>

          <div class="meter-wrap" id="jdWrap" hidden>
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:6px">
              <div><b>JD Match</b> <span class="note">(keyword coverage)</span></div>
              <div class="badge mono" id="matchLbl">0%</div>
            </div>
            <div class="meter">
              <div class="bar" id="matchBar"></div>
            </div>
          </div>

          <div class="result">
            <h3 class="h5">Findings</h3>
            <div class="kgrid">
              <div><b>Sections found:</b>
                <div id="sectionsFound" class="note"></div>
              </div>
              <div><b>Contact info:</b>
                <div id="contactFound" class="note"></div>
              </div>
              <div><b>Words / Pages:</b>
                <div id="lengthFound" class="note"></div>
              </div>
              <div><b>Formatting flags:</b>
                <div id="formatFlags" class="note"></div>
              </div>
            </div>
          </div>

          <div class="result">
            <h3 class="h5">Keywords</h3>
            <div class="kgrid">
              <div><b>Resume keywords</b>
                <div id="resumeTop" class="note"></div>
              </div>
              <div id="jdCol" hidden><b>JD keywords</b>
                <div id="jdTop" class="note"></div>
              </div>
              <div id="missingCol" hidden><b>Missing (from JD)</b>
                <div id="missingKeys" class="note"></div>
              </div>
            </div>
          </div>

          <div class="result">
            <h3 class="h5">Actionable Suggestions</h3>
            <ul id="suggestions" class="list compact"></ul>
          </div>

          <details class="result">
            <summary><b>Preview Extracted Text (debug)</b></summary>
            <pre id="debugText" class="mono" style="white-space:pre-wrap"></pre>
          </details>
        </div>

        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button id="copyBtn" class="btn secondary" type="button">Copy Suggestions</button>
          <button id="dlBtn" class="btn secondary" type="button">Download Report (.txt)</button>
        </div>
      </article>
    </section>

    <!-- Related tools / backlinks -->
    <section class="spaced" aria-labelledby="related">
      <h2 id="related" class="h5">More from UpTools</h2>
      <div class="cards">
        <a class="card card-link" href="/ai-writer/" aria-label="AI Writer"><span>AI Writer</span><span
            class="card-badge">AI</span></a>
        <a class="card card-link" href="/word-counter/" aria-label="Word Counter"><span>Word Counter</span><span
            class="card-badge">WC</span></a>
        <a class="card card-link" href="/text-case-converter/" aria-label="Text Case Converter"><span>Text
            Case</span><span class="card-badge">TC</span></a>
        <a class="card card-link" href="/json-formatter/" aria-label="JSON Formatter"><span>JSON Formatter</span><span
            class="card-badge">JS</span></a>
        <a class="card card-link" href="/image-converter/" aria-label="Image Converter"><span>Image
            Converter</span><span class="card-badge">IC</span></a>
        <a class="card card-link" href="/qr-generator/" aria-label="QR Code Generator"><span>QR Generator</span><span
            class="card-badge">QR</span></a>
      </div>
    </section>

    <footer class="site-footer">
      <nav class="nav-links" aria-label="Footer">
        <a href="/about/" aria-label="About UpTools"><span class="card-badge">ABT</span> About</a>
        <a href="/contact/" aria-label="Contact UpTools"><span class="card-badge">CT</span> Contact</a>
        <a href="/privacy/" aria-label="Privacy Policy"><span class="card-badge">PP</span> Privacy</a>
      </nav>
      <p class="tiny-note">¬© <span id="y"></span> UpTools. Privacy-first utilities & games.</p>
    </footer>
  </main>

  <!-- Page script (module) -->
  <script type="module">
    // Shared utils (ES import, per your guideline)
    let U = {};
    try { const mod = await import('/scripts/utils.js'); U = mod?.default || mod || {}; } catch { U = window || {}; }
    const $ = (s, r = document) => r.querySelector(s);
    const $$ = (s, r = document) => [...r.querySelectorAll(s)];
    const setText = (el, v) => { if (el) el.textContent = v; };

    // DOM refs
    const resumeFile = $('#resumeFile');
    const jdFile = $('#jdFile');
    const jdText = $('#jdText');
    const analyzeBtn = $('#analyzeBtn');
    const clearBtn = $('#clearBtn');
    const status = $('#status');

    const atsBar = $('#atsBar');
    const atsLbl = $('#atsScoreLbl');
    const matchBar = $('#matchBar');
    const matchLbl = $('#matchLbl');
    const jdWrap = $('#jdWrap');

    const sectionsFound = $('#sectionsFound');
    const contactFound = $('#contactFound');
    const lengthFound = $('#lengthFound');
    const formatFlags = $('#formatFlags');

    const resumeTop = $('#resumeTop');
    const jdTop = $('#jdTop');
    const missingKeys = $('#missingKeys');
    const jdCol = $('#jdCol');
    const missingCol = $('#missingCol');

    const suggestions = $('#suggestions');
    const debugText = $('#debugText');
    const copyBtn = $('#copyBtn');
    const dlBtn = $('#dlBtn');

    // Footer year
    $('#y').textContent = new Date().getFullYear();

    // Ad mount (ONLY if available; fixed area avoids CLS)
    (function mountAd() {
      if (!('adsbygoogle' in window)) return;
      const mount = document.getElementById('ad-mount');
      const wrap = document.createElement('div');
      wrap.className = 'ad-slot';
      wrap.style.display = 'block';
      wrap.style.margin = '10px 0';
      wrap.innerHTML = `
        <ins class="adsbygoogle"
             style="display:block; width:100%; min-height:120px;"
             data-ad-client="ca-pub-6216304334889617"
             data-ad-slot="auto"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>`;
      mount.appendChild(wrap);
      try { (window.adsbygoogle = window.adsbygoogle || []).push({}); } catch { }
    })();

    // ---------- File Parsing (lazy-load parsers to keep page light) ----------
    async function parseFileToText(file) {
      if (!file) return '';
      const ext = (file.name.split('.').pop() || '').toLowerCase();

      // TXT (simple & fast)
      if (ext === 'txt') return await file.text();

      // DOCX (use ESM mammoth via CDN; loaded only when needed)
      if (ext === 'docx') {
        try {
          const mammoth = await import('https://cdn.skypack.dev/mammoth'); // ESM build
          const arrayBuffer = await file.arrayBuffer();
          const { value } = await mammoth.extractRawText({ arrayBuffer });
          return value || '';
        } catch (e) {
          console.warn('DOCX parse failed', e);
          return '';
        }
      }

      // Legacy .doc ‚Äî best-effort (not reliably supported in-browser)
      if (ext === 'doc') {
        // We can't reliably parse binary .doc in-browser without heavy libs.
        // Encourage user to convert to DOCX/PDF/TXT for best results.
        return '';
      }

      // PDF (use pdfjs-dist ESM; loaded only when needed)
      if (ext === 'pdf') {
        try {
          const pdfjs = await import('https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.min.mjs');
          // worker
          pdfjs.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.worker.min.js';
          const data = new Uint8Array(await file.arrayBuffer());
          const doc = await pdfjs.getDocument({ data }).promise;
          let text = '';
          for (let p = 1; p <= doc.numPages; p++) {
            const page = await doc.getPage(p);
            const content = await page.getTextContent();
            const strings = content.items.map(i => i.str);
            text += strings.join(' ') + '\n';
          }
          return text;
        } catch (e) {
          console.warn('PDF parse failed', e);
          return '';
        }
      }

      // Fallback
      return '';
    }

    // ---------- Analysis ----------
    const STOP = new Set('a,an,and,are,as,at,be,by,for,from,has,have,in,is,it,its,of,on,or,that,the,this,to,with,your,our,was,were,will,shall,can,may,not,than,then,if,into,via,over,under,per,using,used,us,them,they,he,she,him,her,who,whom,which,what,when,where,why,how,am,i,me,my,we,ours,ourself,their,themself,there,here'.split(','));
    function clean(text) {
      return (text || '')
        .replace(/\u0000/g, ' ')
        .replace(/\s+/g, ' ')
        .trim();
    }
    function toWords(text) {
      return clean(text).toLowerCase().match(/[a-z][a-z\-\+\.#0-9]{1,}/g) || [];
    }
    function topKeywords(text, n = 25) {
      const words = toWords(text).filter(w => w.length > 2 && !STOP.has(w));
      const freq = new Map();
      for (const w of words) { freq.set(w, (freq.get(w) || 0) + 1); }
      const arr = [...freq.entries()].sort((a, b) => b[1] - a[1]).slice(0, n).map(([k, v]) => k);
      return arr;
    }
    function has(text, pattern) { return new RegExp(pattern, 'i').test(text || ''); }
    function sectionPresence(text) {
      const s = (k) => has(text, `\\b${k}\\b`);
      return {
        summary: s('summary|profile|objective'),
        experience: s('experience|work history|employment'),
        education: s('education|academics|degree|bachelor|master'),
        skills: s('skills|technologies|tooling|competencies'),
        projects: s('projects|portfolio|case studies'),
        certifications: s('certification|certifications|licenses'),
        achievements: s('achievements|awards|recognition'),
      };
    }
    function contactChecks(text) {
      const email = /\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b/i.test(text);
      const phone = /(\+?\d[\d\-\s()]{7,}\d)/.test(text);
      const links = /(linkedin\.com\/in\/|github\.com\/|portfolio|behance\.net|dribbble\.com)/i.test(text);
      const address = /(india|usa|uk|canada|australia|address:|location)/i.test(text);
      return { email, phone, links, address };
    }
    function formattingFlags(text) {
      const flags = [];
      if ((text.match(/[‚Ä¢‚ñ™‚ñ†\-\*]\s/g) || []).length > 200) flags.push('Excessive bullet density');
      if (/table|column/i.test(text) && /‚îÇ|‚îÜ|‚îä|‚îã|‚îá|‚îÉ|‚îè|‚îì|‚îó|‚îõ/.test(text)) flags.push('Possible tables/columns (can confuse parsers)');
      if (/[^\x09\x0A\x0D\x20-\x7E\u00A0-\u024F]/.test(text)) flags.push('Non-ASCII/unicode artifacts');
      if (text.length > 18000) flags.push('Document very long (>18k chars)');
      return flags.length ? flags : ['None'];
    }
    function scoreATS(text) {
      const sec = sectionPresence(text);
      const contact = contactChecks(text);
      const base = 40;
      const secScore = Object.values(sec).filter(Boolean).length / 7 * 40;
      const contactScore = (contact.email ? 1 : 0) + (contact.phone ? 1 : 0) + (contact.links ? 0.5 : 0) + (contact.address ? 0.3 : 0);
      const cappedContact = Math.min(contactScore / 2.8 * 20, 20);
      return Math.round(Math.min(100, base + secScore + cappedContact));
    }
    function matchScore(resume, jd) {
      const R = new Set(topKeywords(resume, 80));
      const J = topKeywords(jd, 60);
      const covered = J.filter(k => R.has(k));
      const missing = J.filter(k => !R.has(k));
      const score = Math.round((covered.length / Math.max(1, J.length)) * 100);
      return { score, covered, missing, rTop: [...R].slice(0, 30), jTop: J.slice(0, 30) };
    }

    function setMeter(bar, lbl, v) {
      bar.style.width = Math.max(0, Math.min(100, v)) + '%';
      setText(lbl, v + '%');
    }

    function addSuggestion(txt) {
      const li = document.createElement('li');
      li.textContent = txt;
      suggestions.appendChild(li);
    }

    function resetUI() {
      suggestions.innerHTML = '';
      setMeter(atsBar, atsLbl, 0);
      setMeter(matchBar, matchLbl, 0);
      jdWrap.hidden = true;
      jdCol.hidden = true;
      missingCol.hidden = true;
      setText(sectionsFound, '');
      setText(contactFound, '');
      setText(lengthFound, '');
      setText(formatFlags, '');
      setText(resumeTop, '');
      setText(jdTop, '');
      setText(missingKeys, '');
      setText(debugText, '');
      status.textContent = '';
    }

    // Drag & Drop helper
    const dropZone = $('#dropZone');
    ['dragenter', 'dragover'].forEach(ev => dropZone.addEventListener(ev, e => { e.preventDefault(); dropZone.classList.add('over'); }));
    ;['dragleave', 'drop'].forEach(ev => dropZone.addEventListener(ev, e => { e.preventDefault(); dropZone.classList.remove('over'); }));
    dropZone.addEventListener('drop', (e) => {
      const files = [...e.dataTransfer.files];
      const first = files[0], second = files[1];
      if (first) resumeFile.files = new DataTransfer().files; // reset
      if (first) {
        const dt1 = new DataTransfer(); dt1.items.add(first); resumeFile.files = dt1.files;
      }
      if (second) {
        const dt2 = new DataTransfer(); dt2.items.add(second); jdFile.files = dt2.files;
      }
    });

    clearBtn.addEventListener('click', () => {
      resumeFile.value = ''; jdFile.value = ''; jdText.value = '';
      resetUI();
    });

    analyzeBtn.addEventListener('click', async () => {
      resetUI();
      status.textContent = 'Parsing files‚Ä¶';

      const resumeTxt = await parseFileToText(resumeFile.files?.[0]);
      const jdTxtFile = await parseFileToText(jdFile.files?.[0]);
      const jdAll = (jdTxtFile || jdText.value || '').trim();
      const resumeAll = (resumeTxt || '').trim();

      if (!resumeAll) {
        status.textContent = 'Could not read resume. Try a DOCX/TXT or different PDF, or copy-paste text.';
        return;
      }

      // Show debug (collapsed)
      debugText.textContent = resumeAll.slice(0, 120000);

      // Compute basics
      const words = toWords(resumeAll).length;
      const pagesGuess = Math.max(1, Math.round(resumeAll.length / 3500)); // heuristic
      const secs = sectionPresence(resumeAll);
      const contacts = contactChecks(resumeAll);
      const flags = formattingFlags(resumeAll);
      const ats = scoreATS(resumeAll);

      setMeter(atsBar, atsLbl, ats);
      setText(sectionsFound,
        Object.entries(secs).filter(([k, v]) => v).map(([k]) => k).join(', ') || '‚Äî');
      setText(contactFound,
        ['email', 'phone', 'links', 'address'].map(k => (contacts[k] ? k + ' ‚úì' : k + ' ‚úó')).join(', '));
      setText(lengthFound, `${words.toLocaleString()} words ‚Ä¢ ~${pagesGuess} page(s)`);
      setText(formatFlags, flags.join('; '));

      // Resume top keywords
      const rTop = topKeywords(resumeAll, 25);
      setText(resumeTop, rTop.join(', ') || '‚Äî');

      // JD matching
      if (jdAll.length > 10) {
        const { score, covered, missing, rTop: rt, jTop: jt } = matchScore(resumeAll, jdAll);
        jdWrap.hidden = false; jdCol.hidden = false; missingCol.hidden = false;
        setMeter(matchBar, matchLbl, score);
        setText(jdTop, jt.join(', ') || '‚Äî');
        setText(missingKeys, missing.slice(0, 30).join(', ') || '‚Äî');
      }

      // Suggestions
      const fname = resumeFile.files?.[0]?.name || '';
      if (/\s/.test(fname)) addSuggestion('Rename file to avoid spaces (e.g., firstname_lastname_resume.pdf).');
      if (!secs.summary) addSuggestion('Add a concise ‚ÄúSummary/Profile‚Äù at the top with 3‚Äì4 impact lines.');
      if (!secs.skills) addSuggestion('Include a dedicated ‚ÄúSkills‚Äù section with grouped hard skills and tools.');
      if (!contacts.email || !contacts.phone) addSuggestion('Ensure both email and phone are present in the header.');
      if (words < 250) addSuggestion('Resume is very short ‚Äî add measurable achievements and context.');
      if (words > 1200) addSuggestion('Resume seems long ‚Äî trim fluff, keep to 1‚Äì2 pages for most roles.');
      if (flags[0] !== 'None') addSuggestion('Reduce complex formatting (tables/columns/unicode) to improve ATS parsing.');
      if (jdAll.length > 10) addSuggestion('Incorporate missing JD keywords naturally in experience bullets (avoid keyword stuffing).');
      addSuggestion('Start bullets with strong verbs; quantify outcomes (e.g., ‚ÄúImproved conversion by 18%‚Ä¶‚Äù).');

      status.textContent = 'Done.';
    });

    copyBtn.addEventListener('click', async () => {
      const list = [...$$('#suggestions li')].map(li => '‚Ä¢ ' + li.textContent).join('\n');
      try { await navigator.clipboard.writeText(list || ''); status.textContent = 'Suggestions copied.'; }
      catch { status.textContent = 'Copy blocked by browser.'; }
      setTimeout(() => { if (status.textContent.includes('copied')) status.textContent = ''; }, 1500);
    });

    dlBtn.addEventListener('click', () => {
      const list = [...$$('#suggestions li')].map(li => '- ' + li.textContent).join('\n');
      const blob = new Blob([list || ''], { type: 'text/plain;charset=utf-8' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'ats-resume-report.txt';
      a.click();
      URL.revokeObjectURL(a.href);
    });
  </script>
</body>

</html>