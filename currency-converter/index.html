<!doctype html>
<html lang="en">
  <head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6216304334889617"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Currency Converter – UpTools</title>
    <meta name="description" content="Fast currency converter with live exchange rates." />
    <meta name="robots" content="index,follow" />
    <meta name="theme-color" content="#0b1020" />
    <link rel="canonical" href="https://www.uptools.in/currency-converter/" />
    <meta property="og:title" content="Currency Converter – UpTools" />
    <meta property="og:description" content="Convert currencies with live rates." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.uptools.in/currency-converter/" />
    <meta property="og:site_name" content="UpTools" />
    <meta property="og:image" content="https://www.uptools.in/og/currency.png" />
    <meta name="twitter:card" content="summary" />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body style="--accent:#9be7ff;--bg1:#0b1420;--bg2:#0e1e30;--cardBorder:#2a4766">
    <main class="wrap">
      <div class="tool-header"><div class="tool-icon">₹$</div><h1 style="margin:0">Currency Converter</h1></div>
      <div class="card">
        <label class="label" for="amt">Amount</label>
        <input id="amt" class="input" type="number" step="0.01" placeholder="e.g., 100" />
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
          <div style="flex:1;min-width:160px">
            <label class="label" for="from">From</label>
            <select id="from" class="input"></select>
          </div>
          <div style="flex:1;min-width:160px">
            <label class="label" for="to">To</label>
            <select id="to" class="input"></select>
          </div>
        </div>
        <button id="go" class="btn">Convert</button>
        <div id="out" class="result"></div>
      </div>
      <footer class="note small"><a href="/">UpTools</a></footer>
    </main>
    <script type="module">
      const A=document.getElementById('amt'), F=document.getElementById('from'), T=document.getElementById('to'), O=document.getElementById('out');
      const symbols=["INR","USD","EUR","GBP","AUD","CAD","JPY","CNY","AED","SGD","CHF","ZAR"]; 
      function fill(){ symbols.forEach(s=>{ const o=document.createElement('option'); o.value=s; o.textContent=s; F.appendChild(o.cloneNode(true)); T.appendChild(o); }); F.value='INR'; T.value='USD'; }
      async function convert(){
        const amt=Number(A.value||0); if(!isFinite(amt)){ O.textContent='Enter a number'; return; }
        const base=F.value, quote=T.value;
        async function tryHost(){
          const res = await fetch(`https://api.exchangerate.host/latest?base=${base}&symbols=${quote}`);
          if(!res.ok) throw new Error('exchangerate.host');
          const j = await res.json();
          const rate = j.rates?.[quote];
          if(!rate) throw new Error('rate');
          return rate;
        }
        async function tryFrankfurter(){
          const res = await fetch(`https://api.frankfurter.app/latest?from=${base}&to=${quote}`);
          if(!res.ok) throw new Error('frankfurter');
          const j = await res.json();
          const rate = j.rates?.[quote];
          if(!rate) throw new Error('rate');
          return rate;
        }
        try{
          let rate = await tryHost().catch(tryFrankfurter);
          const out = amt*rate;
          O.innerHTML = `<div class='row'><span>Rate</span><span class='amount'>1 ${base} = ${rate.toFixed(4)} ${quote}</span></div>
          <div class='row'><span>Converted</span><span class='amount'>${out.toFixed(2)} ${quote}</span></div>`;
        }catch{
          // Final attempt via Cloudflare Worker proxy if direct CORS fails in prod
          try {
            const prox = await fetch(`/api?url=${encodeURIComponent(`https://api.exchangerate.host/latest?base=${base}&symbols=${quote}`)}`);
            const j = await prox.json();
            const rate = j.rates?.[quote];
            if(!rate) throw 0;
            const out = amt*rate;
            O.innerHTML = `<div class='row'><span>Rate</span><span class='amount'>1 ${base} = ${rate.toFixed(4)} ${quote}</span></div>
            <div class='row'><span>Converted</span><span class='amount'>${out.toFixed(2)} ${quote}</span></div>`;
          } catch {
            O.textContent='Rate unavailable (try again later)';
          }
        }
      }
      document.getElementById('go').addEventListener('click', convert);
      [A,F,T].forEach(el=>el.addEventListener('keydown',e=>{ if(e.key==='Enter') convert(); }));
      fill();
    </script>
  </body>
  </html>

