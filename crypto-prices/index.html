<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="x-ua-compatible" content="IE=edge" />
  <meta name="color-scheme" content="dark light" />

  <title>Live Crypto Prices, Market Cap & Top Coins (BTC, ETH, SOL) | UpTools</title>
  <meta name="description" content="Live cryptocurrency prices for Bitcoin (BTC), Ethereum (ETH), Solana (SOL) and 50+ coins. See market cap, 24h change, volume and search instantly. Data from CoinCap (free API)." />
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1" />
  <meta name="theme-color" content="#0b1020" />
  <link rel="canonical" href="https://www.uptools.in/crypto-prices/" />

  <meta property="og:title" content="Live Crypto Prices & Market Cap - BTC, ETH, SOL" />
  <meta property="og:description" content="Track live prices, market cap, and 24h changes for 50+ coins. Fast and privacy-friendly." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.uptools.in/crypto-prices/" />
  <meta property="og:site_name" content="UpTools" />
  <meta property="og:image" content="https://www.uptools.in/assets/og/home.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="icon" sizes="50x50" type="image/svg+xml" href="/assets/logo/uptools-logo.svg" />

  <link rel="preload" href="/style.css?v=1.2.0" as="style" />
  <link rel="stylesheet" href="/style.css?v=1.2.0" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/style.css?v=1.2.0"></noscript>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"UpTools Live Crypto Prices",
    "applicationCategory":"FinanceApplication",
    "operatingSystem":"Web",
    "url":"https://www.uptools.in/crypto-prices/",
    "description":"Live cryptocurrency prices for Bitcoin, Ethereum, Solana and more with market cap and 24h change.",
    "featureList":["Live prices","Market cap","24h change","Search","Sort"],
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
  }
  </script>

  <style>
    .grid { display:grid; gap:12px }
    .toolbar { display:flex; gap:8px; flex-wrap:wrap; align-items:center }
    .input { flex:1; min-width:220px }
    .table { width:100%; border-collapse:collapse }
    .table th, .table td { padding:.6rem; border-top:1px solid var(--border) }
    .table th { text-align:left; font-weight:700; color:var(--muted) }
    .pos { color:#36d399 }
    .neg { color:#ff6b6b }
    .badge.sym { font-weight:800; font-size:.85rem; background:#0d1628; border-color:#263248; color:#9fb5ff }
    .kpi { display:grid; grid-template-columns: repeat(3, 1fr); gap:8px }
    .kpi .card { text-align:center }
    .spark { width:120px; height:40px }
    @media (max-width:720px){ .opt-spark { display:none } }
    @media (max-width:960px){ .opt-supply, .opt-ath { display:none } }
    @media (max-width:720px){ .opt-cap, .opt-vol { display:none } }
    /* Crypto flair */
    .neon { box-shadow: 0 0 0 1px rgba(64,110,255,.15), 0 0 32px rgba(100,200,255,.08) inset }
    .tool-icon { background: linear-gradient(135deg,#0b1a2a,#0d243a); border: 1px solid var(--border) }
    .chip.toggle { display:inline-flex; align-items:center; gap:6px }
    .logo { width: 20px; height: 20px; border-radius: 50%; background:#0d1628; border:1px solid var(--border); object-fit:cover }
    .row:hover { background:#0b1424 }
  </style>
</head>
<body>
  <header class="site">
    <div class="header-inner">
      <a class="brand" href="/">
        <img class="hero-logo" src="/assets/logo/uptools-logo.svg" alt="UpTools" width="48" height="48" />
        <span>UpTools</span>
      </a>
      <nav class="nav-links" aria-label="Primary">
        <a href="/#tools">Tools</a>
        <a href="/currency-converter/">Currency</a>
        <a aria-current="page" href="/crypto-prices/">Crypto</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <div class="tool-header">
      <div class="tool-icon" aria-hidden="true">₿Ξ</div>
      <h1 style="margin:0">Live Crypto Prices</h1>
    </div>

    <section class="card neon">
      <div class="toolbar">
        <input id="q" class="input" placeholder="Search coin e.g., bitcoin, eth, sol" aria-label="Search coin" />
        <select id="cur" class="input" style="max-width:140px" aria-label="Currency">
          <option value="USD">USD</option>
          <option value="INR">INR</option>
          <option value="EUR">EUR</option>
          <option value="GBP">GBP</option>
          <option value="AED">AED</option>
        </select>
        <select id="sort" class="input" style="max-width:220px" aria-label="Sort by">
          <option value="rank">Rank</option>
          <option value="price">Price</option>
          <option value="change">24h change</option>
          <option value="marketCap">Market cap</option>
        </select>
        <div class="chip toggle">
          Load:
          <button class="btn secondary sm" data-load="50">Top 50</button>
          <button class="btn secondary sm" data-load="100">Top 100</button>
          <button class="btn secondary sm" data-load="250">Top 250</button>
          <button class="btn secondary sm" data-load="all">All</button>
        </div>
        <label class="chip" style="gap:6px"><input id="auto" type="checkbox" /> Auto-refresh</label>
        <button id="refresh" class="btn secondary sm">Refresh</button>
      </div>
      <div class="chips" id="filters" style="margin-top:6px">
        <button class="chip" data-filter="all">All</button>
        <button class="chip" data-filter="l1">L1</button>
        <button class="chip" data-filter="defi">DeFi</button>
        <button class="chip" data-filter="stable">Stable</button>
        <button class="chip" data-filter="meme">Meme</button>
        <button class="chip" data-filter="gainers">Top Gainers</button>
        <button class="chip" data-filter="losers">Top Losers</button>
      </div>
      <div class="kpi" id="kpi">
        <div class="card"><div class="note mini">Coins listed</div><div class="amount" id="kCoins">-</div></div>
        <div class="card"><div class="note mini">Total Market Cap (Top)</div><div class="amount" id="kCap">-</div></div>
        <div class="card"><div class="note mini">24h Volume (Top)</div><div class="amount" id="kVol">-</div></div>
      </div>
      <div style="overflow:auto;margin-top:8px">
        <table class="table" aria-label="Crypto prices table">
          <thead>
            <tr>
              <th>#</th><th>Coin</th><th>Price</th><th>24h</th><th class="opt-cap">Market Cap</th><th class="opt-vol">Volume 24h</th><th class="opt-supply">Circ</th><th class="opt-supply">Max</th><th class="opt-ath">ATH</th><th class="opt-ath">ATL</th><th class="opt-spark">7d</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
      <div style="display:flex; gap:8px; align-items:center; margin-top:6px">
        <button id="loadMore" class="btn secondary sm">Load more</button>
        <div id="meta" class="note mini" style="margin-left:auto"></div>
      </div>
    </section>

    <section class="card neon" aria-labelledby="faq">
      <h2 id="faq" style="margin-top:0">About this crypto price tracker</h2>
      <p class="note">Data source: CoinCap public API. Prices are in USD. 24h change is percent change over the last 24 hours. Market cap and volume are shown for quick comparisons.</p>
      <p class="note">Tip: Use the search to filter coins instantly. Click Refresh to fetch fresh data. On mobile, the sparkline is hidden for speed.</p>
      <div class="note">Also try: <a href="/crypto-converter/">Crypto Converter</a> • <a href="/bitcoin-fees/">Bitcoin Fee Estimator</a> • <a href="/crypto-fear-greed/">Crypto Fear & Greed Index</a></div>
    </section>

    <footer class="note small site-footer">© <span id="y"></span> UpTools • <a href="/sitemap.xml">Sitemap</a> • <a href="/privacy-policy/">Privacy</a></footer>
  </main>

  <script type="module">
    import { $, $$, debounce } from "/scripts/utils.js";
    $("#y").textContent = new Date().getFullYear();

    const els = {
      q: $("#q"), cur: $("#cur"), sort: $("#sort"), auto: $("#auto"), rows: $("#rows"), meta: $("#meta"),
      kCoins: $("#kCoins"), kCap: $("#kCap"), kVol: $("#kVol"), refresh: $("#refresh"), loadMore: $("#loadMore")
    };

    const nf2 = new Intl.NumberFormat(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    const int = new Intl.NumberFormat(undefined, { maximumFractionDigits: 0 });

    let cache = [];
    let fx = 1; // USD -> selected currency
    let mode = '50'; // '50' | '100' | '250' | 'all'
    let page = 1; let loading = false; let session = 0;
    let lastSearchInjected = '';

    const PX = (u) => `/proxy?nocache=1&u=${encodeURIComponent(u)}`;
    async function getJSON(url) {
      try { const r = await fetch(PX(url)); if (!r.ok) throw 0; return await r.json(); } catch {}
      const r2 = await fetch(url); if (!r2.ok) throw new Error('fetch failed'); return await r2.json();
    }

    async function fetchAssets(limit = 50) {
      const url = `https://api.coincap.io/v2/assets?limit=${limit}`;
      const t0 = performance.now();
      let j;
      try { j = await getJSON(url); } catch {}
      // Fallback: CoinGecko
      if (!j || !j.data) {
        const cg = await getJSON(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=${limit}&page=1&price_change_percentage=24h`);
        els.meta.textContent = `Updated just now • ${(performance.now()-t0).toFixed(0)}ms`;
        return (cg || []).map(x => ({
          id: x.id,
          rank: Number(x.market_cap_rank || 0),
          symbol: String(x.symbol || '').toUpperCase(),
          name: x.name,
          price: Number(x.current_price),
          change24h: Number(x.price_change_percentage_24h),
          marketCap: Number(x.market_cap),
          volume24h: Number(x.total_volume),
          circ: Number(x.circulating_supply),
          max: Number(x.max_supply),
          ath: Number(x.ath),
          atl: Number(x.atl),
          img: x.image || ''
        }));
      }
      // CoinCap
      els.meta.textContent = `Updated just now • ${(performance.now()-t0).toFixed(0)}ms`;
      return (j.data || []).map(x => ({
        id: x.id,
        rank: Number(x.rank),
        symbol: x.symbol,
        name: x.name,
        price: Number(x.priceUsd),
        change24h: Number(x.changePercent24Hr),
        marketCap: Number(x.marketCapUsd),
        volume24h: Number(x.volumeUsd24Hr),
        img: '',
        circ: Number(x.supply ?? NaN),
        max: Number(x.maxSupply ?? NaN),
        ath: NaN, atl: NaN
      }));
    }

    async function fetchAllCoins_CG(per = 250, startPage = 1, maxPages = 20) {
      // Progressive loader for "All" mode
      const curSession = ++session; loading = true; page = startPage;
      const out = [];
      while (page <= maxPages) {
        if (curSession !== session) break; // aborted by another load
        els.meta.textContent = `Loading page ${page}…`;
        const cg = await getJSON(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=${per}&page=${page}&price_change_percentage=24h`);
        const mapped = (cg || []).map(x => ({
          id: x.id,
          rank: Number(x.market_cap_rank || 0),
          symbol: String(x.symbol || '').toUpperCase(),
          name: x.name,
          price: Number(x.current_price),
          change24h: Number(x.price_change_percentage_24h),
          marketCap: Number(x.market_cap),
          volume24h: Number(x.total_volume),
          img: x.image || ''
        }));
        if (!mapped.length) break;
        out.push(...mapped);
        cache = out;
        render(cache);
        if (mapped.length < per) break; // last page
        page++;
        // polite delay to avoid hitting rate limits
        await new Promise(r => setTimeout(r, 450));
      }
      loading = false; els.meta.textContent = `Loaded ${out.length} coins`;
      return out;
    }

    async function loadFX(to) {
      if (to === 'USD') { fx = 1; return; }
      try {
        const j = await getJSON(`https://api.exchangerate.host/latest?base=USD&symbols=${to}`);
        fx = Number(j?.rates?.[to]) || 1;
      } catch { fx = 1; }
    }

    function moneyFmt() { return new Intl.NumberFormat(undefined, { style: 'currency', currency: els.cur.value, maximumFractionDigits: 2 }); }
    function updateKPIs(list) {
      els.kCoins.textContent = int.format(list.length);
      const totCap = list.reduce((a, b) => a + (isFinite(b.marketCap) ? b.marketCap : 0), 0) * fx;
      const totVol = list.reduce((a, b) => a + (isFinite(b.volume24h) ? b.volume24h : 0), 0) * fx;
      const money = moneyFmt();
      els.kCap.textContent = money.format(totCap);
      els.kVol.textContent = money.format(totVol);
    }

    function passFilter(x){
      const sym = String(x.symbol||'').toUpperCase();
      const name = String(x.name||'');
      if (ACTIVE_FILTER === 'all') return true;
      if (ACTIVE_FILTER === 'stable') {
        const stableNames = ['USDT','USDC','DAI','TUSD','USDD','USDE','FDUSD','PYUSD','EURS','EURT','USDP'];
        return stableNames.includes(sym) || Math.abs(Number(x.change24h||0)) < 0.3;
      }
      if (ACTIVE_FILTER === 'meme') { return /DOGE|SHIB|INU|PEPE|FLOKI|BONK|WIF/i.test(sym+name); }
      if (ACTIVE_FILTER === 'l1') {
        const l1 = ['BTC','ETH','SOL','ADA','AVAX','DOT','TRX','XRP','LTC','BCH','ATOM','ALGO','NEAR','APT','SUI','SEI','TON','MATIC','ETC','EGLD','KAS'];
        return l1.includes(sym);
      }
      if (ACTIVE_FILTER === 'defi') {
        const defi = ['UNI','AAVE','CRV','COMP','SUSHI','CAKE','RUNE','MKR','BAL','GMX','LDO','DYDX'];
        return defi.includes(sym) || /swap|dex|finance|dao/i.test(name);
      }
      if (ACTIVE_FILTER === 'gainers' || ACTIVE_FILTER === 'losers') return true;
      return true;
    }

    function render(list) {
      const q = els.q.value.trim().toLowerCase();
      let filtered = list.filter(passFilter);
      if (q) filtered = list.filter(x => x.name.toLowerCase().includes(q) || x.symbol.toLowerCase().includes(q));
      const sort = els.sort.value;
      let arr = [...filtered].sort((a, b) => {
        if (sort === 'rank') return a.rank - b.rank;
        if (sort === 'price') return b.price - a.price;
        if (sort === 'change') return (b.change24h - a.change24h);
        if (sort === 'marketCap') return b.marketCap - a.marketCap;
        return 0;
      });
      if (ACTIVE_FILTER === 'gainers') arr = arr.filter(x=>isFinite(x.change24h)).sort((a,b)=>b.change24h-a.change24h).slice(0,50);
      if (ACTIVE_FILTER === 'losers') arr = arr.filter(x=>isFinite(x.change24h)).sort((a,b)=>a.change24h-b.change24h).slice(0,50);
      const money = moneyFmt();
      els.rows.innerHTML = arr.map(x => {
        const img = x.img || `https://assets.coincap.io/assets/icons/${String(x.symbol||'').toLowerCase()}@2x.png`;
        const ch = isFinite(x.change24h) ? x.change24h : 0;
        const cls = ch >= 0 ? 'pos' : 'neg';
        return `<tr>
          <td>${x.rank || ''}</td>
          <td style="display:flex;align-items:center;gap:8px"><img class="logo" src="${img}" alt="${x.symbol}" onerror="this.style.display='none'" /><span class="badge sym">${x.symbol}</span> ${x.name}</td>
          <td class="amount">${money.format(x.price * fx)}</td>
          <td class="${cls}">${nf2.format(ch)}%</td>
          <td class="amount opt-cap">${money.format(x.marketCap * fx)}</td>
          <td class="amount opt-vol">${money.format(x.volume24h * fx)}</td>
          <td class="amount opt-supply">${int.format(Number(x.circ||0))}</td>
          <td class="amount opt-supply">${isFinite(x.max)? int.format(Number(x.max)) : '-'}</td>
          <td class="amount opt-ath">${isFinite(x.ath)? money.format(x.ath*fx) : '-'}</td>
          <td class="amount opt-ath">${isFinite(x.atl)? money.format(x.atl*fx) : '-'}</td>
          <td class="opt-spark"><svg data-coin="${x.id}" class="spark" viewBox="0 0 120 40" preserveAspectRatio="none"></svg></td>
        </tr>`;
      }).join("");
      updateKPIs(arr);
      // Lazy sparkline: draw for first 6 visible
      $$('svg.spark').slice(0, 6).forEach(drawSpark);
    }

    async function drawSpark(svg) {
      const id = svg.getAttribute('data-coin');
      try {
        const end = Date.now();
        const start = end - 7*24*60*60*1000;
        let j, pts = [];
        try {
          j = await getJSON(`https://api.coincap.io/v2/assets/${id}/history?interval=h12&start=${start}&end=${end}`);
          pts = (j.data || []).map(p => Number(p.priceUsd)).filter(v => isFinite(v));
        } catch {}
        if (!pts.length) {
          const cg = await getJSON(`https://api.coingecko.com/api/v3/coins/${id}/market_chart?vs_currency=usd&days=7&interval=hourly`);
          pts = Array.isArray(cg?.prices) ? cg.prices.map(p => Number(p[1])).filter(isFinite) : [];
        }
        if (!pts.length) return;
        const W=120,H=40,P=2; const min=Math.min(...pts), max=Math.max(...pts), span=max-min||1; const step=(W-P*2)/(pts.length-1);
        let d=""; pts.forEach((v,i)=>{ const x=P+i*step; const y=H-P-((v-min)/span)*(H-P*2); d+= i?` L ${x} ${y}`:`M ${x} ${y}`; });
        svg.innerHTML = `<path d="${d}" fill="none" stroke="var(--accent, #9be7ff)" stroke-width="2" vector-effect="non-scaling-stroke" />`;
      } catch { }
    }

    function updateURL(){
      const u = new URL(location.href);
      u.searchParams.set('cur', els.cur.value);
      if (els.q.value) u.searchParams.set('q', els.q.value); else u.searchParams.delete('q');
      u.searchParams.set('sort', els.sort.value);
      u.searchParams.set('mode', mode);
      u.searchParams.set('filter', ACTIVE_FILTER);
      history.replaceState({}, '', u);
      try { localStorage.setItem('cprefs', JSON.stringify({ mode, filter: ACTIVE_FILTER })); } catch{}
    }

    async function init() {
      // URL hydration
      const u = new URL(location.href);
      const q = u.searchParams.get('q'); if (q) els.q.value = q;
      const cur = u.searchParams.get('cur'); if (cur) els.cur.value = cur;
      const sort = u.searchParams.get('sort'); if (sort) els.sort.value = sort;
      const m = u.searchParams.get('mode'); if (m) mode = m;
      const f = u.searchParams.get('filter'); if (f) ACTIVE_FILTER = f;
      try { const saved = JSON.parse(localStorage.getItem('cprefs')||'{}'); if (saved.mode && !m) mode = saved.mode; if (saved.filter && !f) ACTIVE_FILTER = saved.filter; } catch{}
      await loadFX(els.cur.value);
      try {
        const lim = mode==='all'? 50 : Number(mode)||50;
        cache = await fetchAssets(lim); render(cache);
        if (mode==='all') fetchAllCoins_CG(250, 1, 20);
      }
      catch { els.meta.textContent = 'Failed to load data. Try again later.'; }
      updateURL();
    }

    let timer = 0;
    function setAuto(on){ clearInterval(timer); if (on) { timer = setInterval(async ()=>{ await loadFX(els.cur.value); cache = await fetchAssets(50); render(cache); }, 60000); } }

    els.q.addEventListener('input', debounce(async ()=>{
      const qv = els.q.value.trim();
      render(cache);
      updateURL();
      // If the query isn't present in cache, try on-demand search inject (CoinGecko)
      if (qv.length >= 2) {
        const present = cache.some(x => x.name.toLowerCase().includes(qv.toLowerCase()) || x.symbol.toLowerCase() === qv.toLowerCase());
        if (!present && lastSearchInjected !== qv) {
          await searchAndInject(qv);
          lastSearchInjected = qv;
          render(cache);
        }
      }
    }, 300));
    els.sort.addEventListener('change', ()=>{ render(cache); updateURL(); });
    els.cur.addEventListener('change', async ()=>{ await loadFX(els.cur.value); render(cache); updateURL(); });
    els.auto.addEventListener('change', ()=> setAuto(els.auto.checked));
    $("#refresh").addEventListener('click', async ()=>{ await loadFX(els.cur.value); cache = await fetchAssets(Number(mode)||50); render(cache); });

    // Load controls
    $$("[data-load]").forEach(b=> b.addEventListener('click', async ()=>{
      const m = b.getAttribute('data-load'); if (!m) return; mode = m; session++; // cancel in-flight
      if (mode === 'all') {
        els.loadMore.style.display = 'none';
        cache = []; render(cache);
        await fetchAllCoins_CG(250, 1, 20);
      } else {
        els.loadMore.style.display = '';
        const lim = Number(mode)||50;
        cache = await fetchAssets(lim);
        render(cache);
      }
      updateURL();
    }));

    els.loadMore.addEventListener('click', async ()=>{
      // Incrementally extend list using CoinGecko pages beyond current size
      if (loading) return; const nextPage = Math.floor(cache.length/250)+1; loading = true;
      const add = await fetchAllCoins_CG(250, nextPage, nextPage); // just one page
      loading = false; if (add.length) { cache = add; render(cache); }
    });

    // Filter controls
    $$('#filters [data-filter]').forEach(btn => btn.addEventListener('click', ()=>{
      ACTIVE_FILTER = btn.getAttribute('data-filter');
      updateURL(); render(cache);
    }));

    // Infinite scroll when in 'all' mode
    const sentinel = document.getElementById('sentinel');
    if ('IntersectionObserver' in window && sentinel) {
      const io = new IntersectionObserver(async (entries)=>{
        if (mode !== 'all') return;
        if (entries.some(e=>e.isIntersecting)) {
          if (loading) return; const nextPage = Math.floor(cache.length/250)+1; loading = true;
          const add = await fetchAllCoins_CG(250, nextPage, nextPage);
          loading = false; if (add.length) { cache = add; render(cache); }
        }
      }, { rootMargin: '1200px 0px 1200px 0px' });
      io.observe(sentinel);
    }

    async function searchAndInject(query) {
      try {
        els.meta.textContent = `Searching "${query}"…`;
        const s = await getJSON(`https://api.coingecko.com/api/v3/search?query=${encodeURIComponent(query)}`);
        const ids = (s?.coins || []).slice(0, 10).map(c => c.id).filter(Boolean);
        if (!ids.length) { els.meta.textContent = `No results for "${query}"`; return; }
        const det = await getJSON(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${encodeURIComponent(ids.join(','))}&price_change_percentage=24h`);
        const mapped = (det || []).map(x => ({
          id: x.id,
          rank: Number(x.market_cap_rank || 0),
          symbol: String(x.symbol || '').toUpperCase(),
          name: x.name,
          price: Number(x.current_price),
          change24h: Number(x.price_change_percentage_24h),
          marketCap: Number(x.market_cap),
          volume24h: Number(x.total_volume),
          img: x.image || ''
        }));
        // Merge (dedupe by id)
        const map = new Map(cache.map(c => [c.id, c]));
        for (const m of mapped) map.set(m.id, m);
        cache = Array.from(map.values());
        els.meta.textContent = `Added ${mapped.length} result(s)`;
      } catch {
        els.meta.textContent = `Search unavailable right now`;
      }
    }

    init();
  </script>
</body>
</html>
